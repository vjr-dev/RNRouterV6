/*! For license information please see index.716eea852afd7105d09f.js.LICENSE.txt */
(()=>{var e={455:(e,t,n)=>{e.exports=n.p+"a17fd080e8857b1826b78505b4b1a7dc.svg"},934:(e,t,n)=>{e.exports=n.p+"142bcaededf4e8b836d1f517a7096e04.png"},572:(e,t,n)=>{e.exports=n.p+"d5adb7d9186c5462b7a3259426e96aee.webp"},218:(e,t,n)=>{e.exports=n.p+"d6946d444c42cfed6327cb632ccddf59.webp"},546:(e,t,n)=>{e.exports=n.p+"10860eca354651082b7a469ab2ecc33a.webp"},713:(e,t,n)=>{e.exports=n.p+"82b511f2e2bcdc15ba09797086b795a4.webp"},911:(e,t,n)=>{e.exports=n.p+"43620ea48d899a1be9c1c17f36d27abc.webp"},998:(e,t,n)=>{e.exports=n.p+"27ac92a686e190abadc687191a0e7957.webp"},427:(e,t,n)=>{e.exports=n.p+"95601ea673b99cc7bc3bb5f116b14290.webp"},618:(e,t,n)=>{e.exports=n.p+"7ae0068e8cfd96ead67a50b074275d43.webp"},328:(e,t,n)=>{e.exports=n.p+"2c7ddb717514f7bd6c1b1879706d88af.webp"},400:(e,t,n)=>{e.exports=n.p+"242082b2d46922627eaef2e4840ffd16.webp"},262:(e,t,n)=>{e.exports=n.p+"f8389ca1a741a115313bede9ac02e2c0.svg"},658:(e,t,n)=>{e.exports=n.p+"69d81f6f23fcc41f305c1181b61b8e44.svg"},787:(e,t,n)=>{e.exports=n.p+"625c961fb332083d205d91419668c239.png"},530:(e,t,n)=>{e.exports=n.p+"c3c2cbc937a5a17f3abee44592dcaaff.css"},627:(e,t,n)=>{e.exports=n.p+"b7c68a05a4ae661c771412bf87caee65.css"},317:(e,t,n)=>{e.exports=n.p+"3fd9913e6eb519a8e91f5f1029de39f9.css"},373:(e,t,n)=>{e.exports=n.p+"7855dfbdf8f60d78f049cfcc46069c03.css"},394:(e,t,n)=>{e.exports=n.p+"0542963ca631ec1b2e761d078161dc9d.css"},614:(e,t,n)=>{e.exports=n.p+"ac751bad537f284385518ea90d3478b4.css"},629:(e,t,n)=>{e.exports=n.p+"a1f43f5e760e8073604e464c920f8f28.css"},3:(e,t,n)=>{var i='<link rel="stylesheet" href="'+n(91)(n(629))+'"/> <div id="page_title">About - Panzoid</div> <div class="inner"> <div style="display:none" id="controls" class="controls"></div> </div> <div id="about" class="inner aboutsection" style="display:none"> <h2>About Panzoid</h2> <p> Panzoid is a community and tools for creating beautiful, custom content. It was started in January of 2012 for aspiring online content creators. The launch of Backgrounder 1.0 marked the start of Panzoid\'s mission to provide tools for easily creating beautiful, custom digital art. </p> </div> <div id="plans" class="inner aboutsection" style="display:none"> <h2>Panzoid pricing</h2> <div id="plans_container"></div> </div> <div id="terms" class="inner aboutsection" style="display:none"> <h2>Terms of Service</h2> <strong>1. Terms </strong> <p> By accessing this web site, you are agreeing to be bound by these web site Terms and Conditions of Use, all applicable laws and regulations, and agree that you are responsible for compliance with any applicable local laws. If you do not agree with any of these terms, you are prohibited from using or accessing this site. The materials contained in this web site are protected by applicable copyright and trade mark law. </p> <strong>2. Use License </strong> <ol type="a"> <li>Permission is granted to temporarily download one copy of the materials (information or software) on Panzoid\'s web site for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not: <ol type="i"> <li>modify or copy the materials;</li> <li>use the materials for any commercial purpose, or for any public display (commercial or non-commercial);</li> <li>attempt to decompile or reverse engineer any software contained on Panzoid\'s web site;</li> <li>remove any copyright or other proprietary notations from the materials; or</li> <li>transfer the materials to another person or "mirror" the materials on any other server.</li> </ol> </li> <li>This license shall automatically terminate if you violate any of these restrictions and may be terminated by Panzoid at any time. Upon terminating your viewing of these materials or upon the termination of this license, you must destroy any downloaded materials in your possession whether in electronic or printed format. </li> </ol> <strong>3. Disclaimer </strong> <ol type="a"> <li>The materials on Panzoid\'s web site are provided "as is". Panzoid makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties, including without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights. Further, Panzoid does not warrant or make any representations concerning the accuracy, likely results, or reliability of the use of the materials on its web site or otherwise relating to such materials or on any sites linked to this site. </li> </ol> <strong>4. Limitations </strong> <p> In no event shall Panzoid or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on Panzoid\'s Internet site, even if Panzoid or a Panzoid authorized representative has been notified orally or in writing of the possibility of such damage. Because some jurisdictions do not allow limitations on implied warranties, or limitations of liability for consequential or incidental damages, these limitations may not apply to you. </p> <strong>5. Revisions and Errata </strong> <p> The materials appearing on Panzoid\'s web site could include technical, typographical, or photographic errors. Panzoid does not warrant that any of the materials on its web site are accurate, complete, or current. Panzoid may make changes to the materials contained on its web site at any time without notice. Panzoid does not, however, make any commitment to update the materials. </p> <strong>6. Links </strong> <p> Panzoid has not reviewed all of the sites linked to its web site and is not responsible for the contents of any such linked site. The inclusion of any link does not imply endorsement by Panzoid of the site. Use of any such linked web site is at the user\'s own risk. </p> <strong>7. Site Terms of Use Modifications </strong> <p> Panzoid may revise these terms of use for its web site at any time without notice. By using this web site you are agreeing to be bound by the then current version of these Terms and Conditions of Use. </p> <strong>8. Governing Law </strong> <p> Any claim relating to Panzoid\'s web site shall be governed by the laws of the State of Illinois without regard to its conflict of law provisions. </p> </div> <div id="privacy" class="inner aboutsection" style="display:none"> <h2>Privacy Policy</h2> <div> <strong>What information do we collect?</strong> <br/> <br/> We collect information from you when you register on our site, fill out a form, or use one of our online tools. <br/> <br/> When registering on our site or sending feedback, as appropriate, you may be asked to enter your e-mail address. You may, however, visit our site anonymously. <br/> <br/> When using our online tools, occasionally data may be sent to Panzoid about your usage experience. <br/> <br/> <strong>What do we use your information for?</strong> <br/> <br/> Any of the information we collect from you may be used in one of the following ways: <br/> <br/> The email address you provide may be used to send you information, respond to inquiries, and/or other requests or questions. <br/> <br/> Information sent about the use of our tools is solely for the purposes of improving your experience and will never be used to identify you. <br/> <br/> <strong>Do we use cookies?</strong> <br/> <br/> Yes (Cookies are small files that a site or its service provider transfers to your computers hard drive through your Web browser (if you allow) that enables the sites or service providers systems to recognize your browser and capture and remember certain information. <br/> <br/> We use cookies to understand and save your preferences for future visits.<br/> <br/> <strong>Do we disclose any information to outside parties?</strong> <br/> <br/> We do not sell, trade, or otherwise transfer to outside parties your personally identifiable information. This does not include trusted third parties who assist us in operating our website, conducting our business, or servicing you, so long as those parties agree to keep this information confidential. We may also release your information when we believe release is appropriate to comply with the law, enforce our site policies, or protect ours or others rights, property, or safety. However, non-personally identifiable visitor information may be provided to other parties for marketing, advertising, or other uses. <br/> <br/> <strong>DoubleClick DART Cookie </strong> <br/> <br/> Google, as a third party vendor, uses cookies to serve ads on Panzoid.com. Google\'s use of the DART cookie enables it to serve ads to users based on their visit to www.panzoid.com and other sites on the Internet. Users may opt out of the use of the DART cookie by visiting the Google ad and content network privacy policy at the following URL - <a href="https://www.google.com/policies/technologies/ads/">google.com/policies/technologies/ads/</a> <br/> <br/> Some of our advertising partners may use cookies and web beacons on our site. Our advertising partners include Google Adsense. These third-party ad servers or ad networks use technology to the advertisements and links that appear on panzoid.com send directly to your browsers. They automatically receive your IP address when this occurs. Other technologies ( such as cookies, JavaScript, or Web Beacons ) may also be used by the third-party ad networks to measure the effectiveness of their advertisements and / or to personalize the advertising content that you see. <br/> <br/> Panzoid.com has no access to or control over these cookies that are used by third-party advertisers. You should consult the respective privacy policies of these third-party ad servers for more detailed information on their practices as well as for instructions about how to opt-out of certain practices. Panzoid.com\'s privacy policy does not apply to, and we cannot control the activities of, such other advertisers or web sites. If you wish to disable cookies, you may do so through your individual browser options. More detailed information about cookie management with specific web browsers can be found at the browsers\' respective websites. <br/> <br/> <strong>How do we protect your information?</strong> <br/> <br/> We implement a variety of security measures to maintain the safety of your personal information when you enter, submit, or access your personal information. <br/> <br/> <strong>Third party links</strong> <br/> <br/> Occasionally, at our discretion, we may include or offer third party products or services on our website. These third party sites have separate and independent privacy policies. We therefore have no responsibility or liability for the content and activities of these linked sites. Nonetheless, we seek to protect the integrity of our site and welcome any feedback about these sites. <br/> <br/> <strong>California Online Privacy Protection Act Compliance</strong> <br/> <br/> Because we value your privacy we have taken the necessary precautions to be in compliance with the California Online Privacy Protection Act. We therefore will not distribute your personal information to outside parties without your consent. <br/> <br/> As part of the California Online Privacy Protection Act, all users of our site may make any changes to their information at anytime by logging into the forums and going to the \'My Profile\' page. <br/> <br/> <strong>Childrens Online Privacy Protection Act Compliance</strong> <br/> <br/> We are in compliance with the requirements of COPPA (Childrens Online Privacy Protection Act), we do not collect any information from anyone under 13 years of age. Our website, products and services are all directed to people who are at least 13 years old or older. <br/> <br/> <strong>Terms and Conditions</strong> <br/> <br/> Please also visit our Terms and Conditions section establishing the use, disclaimers, and limitations of liability governing the use of our website at <a href="/terms">panzoid.com/terms</a> <br/> <br/> <strong>Your Consent</strong> <br/> <br/> By using our site, you consent to our privacy policy. <br/> <br/> <strong>Changes to our Privacy Policy</strong> <br/> <br/> If we decide to change our privacy policy, we will post those changes on this page, and/or update the Privacy Policy modification date below. <br/> <br/> This policy was last modified on 7/10/2014 <br/> <br/> </div> </div> <div id="advertise" class="inner aboutsection" style="display:none"> </div> <div id="feedback" class="inner aboutsection" style="display:none"> <h2>Send your feedback</h2> <div id="feedback_controls" class="form"> <h4>Let us know what you liked, had trouble with, or would like to see</h4> <span>Name (optional):</span><input id="feedback_name" type="text"><br> <span>Email (optional):</span><input id="feedback_email" type="text"><br> <span>Type:</span><select style="width:312px" id="feedback_type"> <option>Suggestion</option> <option>Problem</option> <option>Comment</option> <option>Question</option> </select><br> <span>Message:</span><textarea id="feedback_message" rows="7"></textarea><br> <span></span><a id="feedback_send" style="line-height:30px" class="button">Send feedback</a> </div> <div id="feedback_success" style="display:none"> Thanks! Your feedback was sent.<br/><br/>Need help? <a href="/discussions">Create a discussion</a> if you have questions or need assistance. </div> <div id="feedback_error" style="display:none"> Sorry, your feedback could not be sent. Please try again later or <a href="/discussions">create a discussion</a> to ask questions and get assistance. </div> </div> <div id="contact" class="inner aboutsection" style="display:none"> <h2 style="margin-top:0">Contact Panzoid</h2> <div id="contact_controls" class="form"> <h4>For concerns about the site, business inquiries, and non-general communication</h4> <p>Prefer email? Contact support@panzoid.com</p> <span>Name:</span><input id="contact_name" type="text"><br> <span>Email:</span><input id="contact_email" type="text"><br> <span>Message:</span><textarea id="contact_message" rows="7"></textarea><br> <span></span><a id="contact_send" style="line-height:30px" class="button">Send message</a> </div> <div id="contact_success" style="display:none"> Thanks! Your message was sent. </div> <div id="contact_error" style="display:none"> Sorry, your message could not be sent. Please try again later. </div> </div> ';e.exports=i},570:(e,t,n)=>{var i=n(91),a=n(530),s=n(713),o=n(911),r=n(572),l=n(400),d=n(618),c=n(998),p=n(218),u=n(546),m=n(328),h=n(427),g='<link rel="stylesheet" href="'+i(a)+'"/> <div id="page_title">Next Gen App - Panzoid</div> <div class="title"> <div> <h1>Introducing the Next Gen App</h1> <a class="tryit" onclick="" href="https://app.panzoid.com" target="_blank">Open App</a> </div> </div> <div class="promo"> <div class="block"> <img loading="lazy" style="flex-basis:25%" src="'+i(s)+'" title="Tool legacy"/> <div> <div class="heading"> <h2>Familiar workflow</h2> </div> <div class="innerblock"> <p>The new app has been entirely rebuilt to support next generation features, but if you\'re familiar with gen 3 tools, you\'ll be right at home with gen 4.</p> </div> </div> </div> <div class="block reverse"> <img loading="lazy" style="flex-basis:25%" src="'+i(o)+'" title="Legacy import"/> <div class="innerblock"> <p><b>Import your existing Panzoid projects</b> to reuse existing creations and continue working seamlessly in the next generation tool.</p> </div> </div> <div class="block"> <img style="flex-basis:10%;flex-grow:.4" loading="lazy" src="'+i(r)+'" title="Collaboration"/> <div> <div class="heading"> <h2>Collaboration</h2> </div> <div class="innerblock"> <p>Your changes <b>sync in real time</b> with other collaborators editing the same project. Just share your project using a generated link to invite others to join.</p> </div> <div class="heading"> <h2>Backup + sync</h2> </div> <div class="innerblock"> <p><b>Save your projects to the cloud</b> with your Panzoid account to access your projects anywhere, anytime. Store up to 2GB of project assets for free, with more space available with a <a href="/about/plans">subscription</a>.</p> </div> </div> </div> <div class="block reverse"> <img loading="lazy" src="'+i(l)+'" title="Snapshots"/> <div> <div class="heading"> <h2>Edit history</h2> </div> <div class="innerblock"> <p>Save <b>lightweight project snapshots</b> to quickly jump to any point in time in your project. Even if you don\'t create snapshots, you can always navigate through your project\'s edit history at any time.</p> <p>Never worry about losing work again. All changes are <b>immediately autosaved</b> and all projects have <b>unlimited undo/redo history</b>.</p> </div> </div> </div> <div class="block grid"> <div class="heading" style="flex-basis:100%"> <h2>Tons of powerful new features</h2> </div> <img loading="lazy" src="'+i(d)+'" title="3D scene editor"/> <img loading="lazy" src="'+i(c)+'" title="Node editor"/> <img loading="lazy" src="'+i(p)+'" title="Effect editor"/> <img loading="lazy" src="'+i(u)+'" title="Layer editor"/> <img loading="lazy" src="'+i(m)+'" title="Layer editor"/> <img loading="lazy" src="'+i(h)+'" title="Layer editor"/> </div> <div class="block"> <div> <div class="heading"> <h2>Try it now!</h2> </div> <div class="innerblock"> <p>The app is <b>available now</b> and runs in a modern web browser.</p> <p>Lots of new features and improvements are planned. Join the community for the latest news on updates and to provide your feedback to help shape future versions.</p> </div> </div> <div> <ul class="actions"> <li><a onclick="" target="_blank" href="/discussions/latest?category=11">Update announcements</a></li> <li><a onclick="" target="_blank" href="/discussions">Community discussions</a></li> </ul> </div> </div> </div>';e.exports=g},457:(e,t,n)=>{var i=n(91),a=n(394),s=n(787),o='<link rel="stylesheet" href="'+i(a)+'"/> <div id="page_title">Creations - Panzoid</div> <div class="inner"> <div id="creations" style="display:none"> <div id="controls" class="controls"> <div> <button id="tool" class="cat" style="display:none">all tools</button><button id="category" class="cat" style="display:none">all categories</button> </div> </div> <div id="creationlist" class="creations"></div> <ul id="tooldd" class="catlist" style="display:none"> <li>all tools</li> </ul> <ul id="categorydd" class="catlist" style="display:none"> <li>all categories</li> </ul> </div> <div id="creation" style="display:none"> <div id="creation_info" class="columns" style="justify-content:inherit;border-bottom:1px solid #ced4da"> <div style="display:flex;flex-direction:column"> <div class="creation"> <img id="creation_thumbnail"> </div> <div class="openbuttons"> <a id="creation_open" class="button openbutton" href="/tools/clipmaker" target="_blank"> Open in Clipmaker </a> <button title="Select another tool" id="creation_open_options" class="button openoptionsbutton">â–¼</button> </div> </div> <div style="flex-basis:10px"></div> <div style="flex-grow:2;max-width:505px;word-break:break-word"> <h1 id="creation_title" style="font-size:26px;margin-top:0;margin-bottom:5px"></h1> <div id="creation_user" style="margin:5px 0"> <div id="creation_user_avatar" style="display:inline-block;margin-right:3px"></div> <div style="display:inline-block;vertical-align:top;margin-left:3px"> <div> <a id="creation_user_link" class="creation_user_link"></a> <img id="creation_user_subscriber" style="display:none" title="subscriber" alt="subscriber" class="subscriber" src="'+i(s)+'"> </div> <button style="display:block" class="follow" id="creation_user_follow"></button> </div> </div> <div id="creation_date"></div> <div id="creation_views"></div> <div id="creation_controls" class="creation_controls"></div> <div id="creation_description" style="margin-top:10px"></div> </div> <div style="flex-basis:10px"></div> <div style="min-height:90px" id="Panzoid_creationpost_336x280_320x50_300x250_300x100_250x250_200x200_180x150"></div> </div> <div id="suggestedlist" class="creations" style="padding:10px 0"></div> <ul id="report" class="actiondd" style="display:none"> <li> Cancel </li> <li> <b>It\'s Inappropriate</b><br> This creation contains content that a reasonable person would consider offensive, abusive, or a violation of our community guidelines. </li> <li> <b>It\'s Spam</b><br> This creation is an advertisment or vandalism. </li> <li> <b>Something Else</b><br> This creation is problematic for another reason. </li> </ul> <ul id="delete" class="actiondd" style="display:none"> <li>Cancel</li> <li><b>Delete this creation</b></li> </ul> <ul id="undelete" class="actiondd" style="display:none"> <li>Cancel</li> <li> <b>Undelete this creation</b> </li> </ul> <ul id="toolselection" class="actiondd" style="display:none"> <li data-href="/tools/clipmaker">Open in Clipmaker 2</li> <li data-href="/tools/gen3/clipmaker">Open in Clipmaker 3</li> </ul> </div> </div> ';e.exports=o},172:(e,t,n)=>{var i=n(91),a=n(627),s=n(394),o='<meta name="description" content="Powerful, free online tools and community for creating content."/> <link rel="stylesheet" href="'+i(a)+'"/> <link rel="stylesheet" href="'+i(s)+'"/> <div id="page_title">Panzoid</div> <div class="toolbar"> <div class="flex-responsive"> <a id="clipmaker_tile" class="tooltile" href="/tools/clipmaker"> <i style="display:none"></i> <div></div> <span>Clipmaker</span> <span class="tooldesc">Powerful online 2D/3D animation tool.</span> </a> <a id="backgrounder_tile" class="tooltile" href="/tools/backgrounder"> <i style="display:none"></i> <div></div> <span>Backgrounder</span> <span class="tooldesc">Create custom graphics, thumbnails, YouTube channel art, and more.</span> </a> <a id="videoeditor_tile" class="tooltile" href="/tools/videoeditor"> <i style="display:none"></i> <div></div> <span>Video Editor</span> <span class="tooldesc">Online editor to edit video/audio clips and add effects.</span> </a> </div> </div> <div id="Panzoid_home_970x90_728x90_468x60_320x50" style="width:94%;max-width:1200px;min-height:90px;margin:auto;padding:10px 0;text-align:center"></div> <div class="inner maincolumns"> <div style="flex-direction:column;flex:2 1 0"> <a class="homeheading" href="/creations">Creations</a> <div id="creations" class="creations"></div> <a class="more" href="/creations">more creations</a> </div> <div style="flex:0 0 15px"></div> <div style="flex:.1 1 30%"> <a class="homeheading" href="/discussions">Discussions</a> <table id="discussions_table" class="discussions"></table> <a class="more" href="/discussions">more discussions</a> </div> </div> <div class="footer"> <a href="/app">app</a> <a href="/about/plans">plans</a> <a href="/about/terms">terms</a> <a href="/about/privacy">privacy</a> <a href="/about/contact">contact</a> <a href="/about/feedback">feedback</a> <br/> copyright 2022 panzoid </div> ';e.exports=o},418:(e,t,n)=>{var i='<link rel="stylesheet" href="'+n(91)(n(614))+'"/> <div id="page_title">Discussions - Panzoid</div> <div class="inner"> <div style="flex:.1 1 30%"> <div id="discussions" style="display:none"> <div id="controls" class="controls"> <div> <button id="category" class="cat" style="display:none"></button> </div> </div> <div class="searchOrCreateBar"> <input id="searchOrCreate" placeholder="Search or create a new discussion"/> <button id="discussions_create" class="button">Create Discussion</button> </div> <table id="discussions_table" class="discussions"> <tr> <th>Topic</th> <th></th> <th class="num">Replies</th> <th class="num">Activity</th> </tr> </table> <table id="categories_table" class="discussions"> <tr> <th>Category</th> <th>Latest</th> </tr> </table> <div id="posts_list"></div> <ul id="categorydd" class="catlist" style="display:none"></ul> </div> <div id="discussion" style="display:none;max-width:1200px;margin:auto"> <div id="discussion_title" class="discussion_title"></div> <div id="discussion_posts"></div> <div id="discussion_controls" class="discussion_controls"></div> </div> <ul id="editor_categorydd" class="catlist" style="display:none"></ul> </div> </div> ';e.exports=i},760:e=>{e.exports='<div id="page_title">Download - Panzoid</div> <div class="inner"> <h2>Thank you for using Panzoid! Your download is starting...</h2> <a href="/feedback" style="font-size:15px;margin:10px 0;display:block" target="_blank">Send us your suggestions and feedback</a> </div> '},178:e=>{e.exports='<style>h1{font-size:20px}a{line-height:30px}</style> <div id="page_title">Panzoid</div> <div class="inner"> <h1>Something went wrong</h1> <div style="margin:15px 0"> Sorry about that, there was a problem loading the page you\'re looking for. </div> <div> <a href="/">Main page</a><br> <a href="/about/feedback">Send feedback</a> </div> </div> '},720:(e,t,n)=>{var i='<meta name="description" content="Powerful, free online tools and community for creating beautiful content."/> <link rel="stylesheet" href="'+n(91)(n(317))+'"/> <div id="page_title">Login - Panzoid</div> <div class="inner"> <h1 id="heading" style="font-size:26px">Log in</h1> <div id="messageUI"></div> <div id="loginUI"> <div id="sso" class="sso"> <button id="sso_google"></button> </div> <div> <label for="username">Username or email</label> <input id="username" type="text"> </div> <div> <label for="password">Password</label> <input id="password" type="password"> <button id="login_forgot" class="text_button">Forgot password</button> </div> <div class="actions"> <button id="login_submit" class="button">Log in</button> <button id="login_create" class="text_button">Create a new account</button> </div> </div> <div id="createUI" style="display:none"> <div> <label for="newemail">Email address</label> <input id="newemail" type="text"> <span class="message" style="display:none"></span> </div> <div> <label for="newusername">Username</label> <input id="newusername" type="text"> <span class="message" style="display:none"></span> </div> <div> <label for="newdisplay">Display name (optional)</label> <input id="newdisplay" type="text"> <span class="message" style="display:none"></span> </div> <div> <label for="newpassword">Password</label> <input id="newpassword" type="password"> <span class="message" style="display:none"></span> </div> <div class="actions"> <button id="create_submit" class="button">Create account</button> <button id="create_login" class="text_button">Log in</button> </div> </div> <div id="forgotUI" style="display:none"> <div> <label for="forgotemail">Email address</label> <input id="forgotemail" type="text"> </div> <div class="actions"> <button id="forgot_submit" class="button">Send link</button> <button id="forgot_login" class="text_button">Log in</button> </div> </div> </div> ';e.exports=i},216:(e,t,n)=>{var i='<meta name="description" content="Powerful, free online tools and community for creating beautiful content."/> <div id="page_title">Login - Panzoid</div> <div class="inner"> <div id="oauth_ui" style="display:none"> <h1 id="heading" style="font-size:26px">Allow app access</h1> <div> <div class="appInfo" style="display:flex;margin:20px 0"> <img style="width:100px;height:100px;margin-right:10px" src="'+n(91)(n(934))+'"/> <div id="oauth_appname" style="font-weight:700;font-size:20px">Panzoid Desktop</div> </div> <div class="actions"> <button id="continue" class="button">Continue</button> <button id="cancel" class="text_button">Cancel</button> </div> </div> </div> </div> ';e.exports=i},481:e=>{e.exports='<style>h1{font-size:20px}#progress{width:80%;height:50px;position:relative;padding:0 25px;box-sizing:border-box;margin:auto;margin-top:20px}.stepsuccess{border-color:#2f9e44!important;background-color:#2b8a3e!important;font-weight:700!important;color:#000!important}.stepfailure{border-color:#c92a2a!important;font-weight:700!important;color:#000!important}.stepdone{border-color:#1971c2!important;background-color:#1864ab!important;font-weight:700!important;color:#000!important}.success{background-color:#2b8a3e!important}div.bar{height:10px;width:100%;position:relative;top:20px;background-color:#ced4da}div.bar>div{width:0%;height:100%;background-color:#1971c2;transition:width 1s ease}div.step{background-color:#ced4da;border:3px solid #adb5bd;width:40px;height:40px;border-radius:50%;margin-left:-20px;margin-top:-20px;position:absolute;top:50%;box-sizing:border-box;color:#868e96}div.step>span{position:absolute;top:40px;width:100px;text-align:center;left:-30px}.downloadbutton{text-align:center;display:block;line-height:35px}.downloadbutton svg{fill:#e9ecef;width:16px;height:16px;margin-right:5px;vertical-align:middle}.downloadbutton span{vertical-align:middle}.details{display:grid;grid-template-columns:min-content auto;white-space:nowrap}.details div{border-bottom:1px solid #ced4da}.details span{padding:10px;border-bottom:1px solid #ced4da}.details span:nth-of-type(odd){background-color:#e9ecef;font-weight:700}.details span:nth-of-type(even){background-color:#f1f3f5}</style> <div id="page_title">Render Details - Panzoid</div> <div id="renderStatus" class="inner"></div> '},935:e=>{e.exports='<style>h1{font-size:20px}label{color:#000;pointer-events:none;font-size:16px}input{padding:5px;margin-bottom:5px;border:2px solid #868e96;font-size:16px;font-family:inherit;transition:all .25s ease;outline:0;width:300px;margin-right:10px;display:block}input:focus{border-color:#1862ab}div.actions{margin-top:12px;line-height:30px}span.message{color:#c92a2a}</style> <div id="page_title">Panzoid Account</div> <div id="verifying" class="inner" style="display:none"> <h1>Verifying...</h1> </div> <div id="changepassword" class="inner" style="display:none"> <h1>Update account password</h1> <div id="messageUI"></div> <div> <label for="newpassword">New password</label> <input id="newpassword" type="password"> <span class="message" style="display:none"></span> </div> <div class="actions"> <button id="password_set" class="button">Set password</button> <a id="password_cancel" href="/">Cancel</a> </div> </div> <div id="changepassword_success" class="inner" style="display:none"> <h1>Your password was updated</h1> <p> Your password was updated successfully. </p> </div> <div id="changeemail_success" class="inner" style="display:none"> <h1>Your email address was updated</h1> <p> Your email address was updated successfully. </p> </div> <div id="error" class="inner" style="display:none"> <h1>Something went wrong.</h1> <p>Please try again later or <a href="/about/contact">contact support</a>.</p> </div> '},858:e=>{e.exports='<style>#container{bottom:0;margin-bottom:0}#legacy_container{position:absolute!important;border:0!important;width:100%!important;height:100%!important;display:block!important}</style> <iframe id="legacy_container"></iframe>'},761:(e,t,n)=>{var i=n(91),a=n(614),s=n(394),o=n(629),r=n(373),l='<link rel="stylesheet" href="'+i(a)+'"/> <link rel="stylesheet" href="'+i(s)+'"/> <link rel="stylesheet" href="'+i(o)+'"/> <link rel="stylesheet" href="'+i(r)+'"/> <div id="page_title">View User - Panzoid</div> <div class="inner"> <div class="userheader"> <div id="user_avatar"> </div> <div id="user_name"> </div> </div> <div id="controls" class="controls"> <div></div> <div> <a id="sendmessage" class="button">Send message</a> </div> </div> <div id="section_divs"> <div id="section"></div> <div id="summary"></div> <div id="settings" style="display:none"></div> </div> </div> ';e.exports=l},91:e=>{"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e)}},377:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(760),a=n.n(i);function s(){var t,n,i,a,s,o,r,l,d,c,p,u,m,h,g,y=y||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||(t="undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content,n=t.document,i=function(){return t.URL||t.webkitURL||t},a=t.URL||t.webkitURL||t,s=n.createElementNS("http://www.w3.org/1999/xhtml","a"),o=!t.externalHost&&"download"in s,r=t.webkitRequestFileSystem,l=t.requestFileSystem||r||t.mozRequestFileSystem,d=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},c="application/octet-stream",p=0,u=[],m=function(e,t,n){for(var i=(t=[].concat(t)).length;i--;){var a=e["on"+t[i]];if("function"==typeof a)try{a.call(e,n||e)}catch(e){d(e)}}},h=function(e,a){var d,h,g,y=this,f=e.type,v=!1,b=function(){var t=i().createObjectURL(e);return u.push(t),t},w=function(){m(y,"writestart progress write writeend".split(" "))},E=function(){!v&&d||(d=b()),h?h.location.href=d:window.open(d,"_blank"),y.readyState=y.DONE,w()},C=function(e){return function(){if(y.readyState!==y.DONE)return e.apply(this,arguments)}},x={create:!0,exclusive:!1};if(y.readyState=y.INIT,a||(a="download"),o){d=b(),n=t.document,(s=n.createElementNS("http://www.w3.org/1999/xhtml","a")).href=d,s.download=a;var k=n.createEvent("MouseEvents");return k.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(k),y.readyState=y.DONE,void w()}t.chrome&&f&&f!==c&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,c),v=!0),r&&"download"!==a&&(a+=".download"),(f===c||r)&&(h=t),l?(p+=e.size,l(t.TEMPORARY,p,C((function(t){t.root.getDirectory("saved",x,C((function(t){var n=function(){t.getFile(a,x,C((function(t){t.createWriter(C((function(n){n.onwriteend=function(e){h.location.href=t.toURL(),u.push(t),y.readyState=y.DONE,m(y,"writeend",e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&E()},"writestart progress write abort".split(" ").forEach((function(e){n["on"+e]=y["on"+e]})),n.write(e),y.abort=function(){n.abort(),y.readyState=y.DONE},y.readyState=y.WRITING})),E)})),E)};t.getFile(a,{create:!1},C((function(e){e.remove(),n()})),C((function(e){e.code===e.NOT_FOUND_ERR?n():E()})))})),E)})),E)):E()},(g=h.prototype).abort=function(){var e=this;e.readyState=e.DONE,m(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,t.addEventListener("unload",(function(){for(var e=u.length;e--;){var t=u[e];"string"==typeof t?a.revokeObjectURL(t):t.remove()}u.length=0}),!1),function(e,t){return new h(e,t)});return e.exports=y,function(){var e,t;if(e=window.opener.PZ.downloadFilename,navigator.msSaveBlob){t=window.opener.PZ?window.opener.PZ.downloadBlob:window.opener.downloadBlob;var n=URL.createObjectURL(t),i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType="blob",i.onload=function(i){4==this.readyState&&(t=this.response,URL.revokeObjectURL(n),setTimeout((function(){y(t,e),t=null}),3e3))},i.send()}else t=window.opener.PZ?window.opener.PZ.downloadBlob:window.opener.downloadBlob,setTimeout((function(){y(t,e),t=null}),3e3)}(),this}e=n.hmd(e),s.pageContent=a()}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i](s,s.exports,n),s.loaded=!0,s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/",(()=>{"use strict";var e=n(570),t=n.n(e);function i(){return this}i.pageContent=t();var a=n(3),s=n.n(a),o=n(455),r=n.n(o);class l{static showImg(){this.style.opacity=1}static generateIcon(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",r()+"#"+e),t.appendChild(n),t}static switchIcon(e,t){e.children[0].setAttribute("href",r()+"#"+t)}static generateDate(e){var t=document.createElement("span");t.innerText=l.relativeDate(e);var n=e.toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"});return t.setAttribute("title",n),t}static dateString(e){return e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}static dateTimeString(e){return e.toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}static relativeDate(e){var t=.001*((new Date).getTime()-e.getTime());return t=Math.max(0,t),l.relativeDateString(t,e)}static relativeDateString(e,t){return e<60?Math.round(e)+"s":e/60<60?Math.round(e/60)+"m":e/60/60<24?Math.round(e/60/60)+"h":e/60/60/24<30?Math.round(e/60/60/24)+"d":void 0!==t?t.toLocaleDateString(void 0,{month:"short"})+" '"+t.toLocaleDateString(void 0,{year:"2-digit"}):Math.round(e/60/60/24/30)+"mo"}}class d{static itemClick(e){var t=document.querySelector(".sections > a.selected");if("search"===this.getAttribute("data-section")){var n=document.getElementById("search");t!==this&&(n.value=""),n.focus()}else{const e=document.querySelector("div.sections a[data-section='search'] > input");e&&(e.value="")}if(t===this)return!1;t&&t.classList.remove("selected"),this.classList.add("selected");const i=new URLSearchParams(location.search);i.has("q")&&i.delete("q");const a=i.toString();return history.pushState({},"",this.href+(a.length?`?${a}`:"")),e(),!1}static inputFocus(){this.parentNode.classList.add("active")}static inputBlur(){this.parentNode.classList.remove("active")}static inputKeyDown(e,t){if("Enter"===t.key){var n=new URLSearchParams(location.search);n.set("q",this.value),history.pushState({},"",location.pathname+"?"+n.toString()),this.blur(),e()}}static parsePath(e){parseInt(e)||(e=2);var t={};return t.path=location.pathname,t.basePath=t.path.substring(0,t.path.split("/",e).join("/").length),t.section=t.path.substring(t.basePath.length+1),t}static update(e,t){var n=d.parsePath(t),i=e.querySelector(".selected");if(i&&i.classList.remove("selected"),!(i=e.querySelector("[data-section='"+n.section+"']"))){if(n.section)return;i=e.children[0]}if("search"===i.getAttribute("data-section")){const e=new URLSearchParams(location.search);i.querySelector("input").value=e.get("q")||""}else{const e=document.querySelector("div.sections a[data-section='search'] > input");e&&(e.value="")}i.classList.add("selected")}static init(e,t,n){var i=document.createElement("div");i.classList.add("sections");var a=d.parsePath(n);e.indexOf(a.section)<0&&(a.section=e[0]);for(var s=function(){return d.itemClick.call(this,t)},o=0;o<e.length;o++){var r=e[o],c=document.createElement("a");if(c.setAttribute("tabindex","0"),c.setAttribute("data-section",r),c.setAttribute("href",a.basePath+(0===o?"":"/"+r)),c.onclick=s,"search"===r){c.appendChild(l.generateIcon("search"));var p=document.createElement("input");p.setAttribute("id","search"),p.setAttribute("type","text"),p.setAttribute("placeholder","Search"),p.onfocus=d.inputFocus,p.onblur=d.inputBlur,p.onkeydown=d.inputKeyDown.bind(p,t),p.classList.add("search"),c.appendChild(p)}else c.innerText=e[o];i.appendChild(c)}return i}}const c="https://api.panzoid.com";class p{static get BASE_URI(){return c}static async call(e,t,n,i){let a;e=c+e,i=i||15e3,"get"!==t&&"head"!==t&&(await g.getCurrent(),a=new Headers,a.append("x-csrf-token",PZ.account.csrf),n instanceof FormData==0&&(a.append("Content-Type","application/json"),n=JSON.stringify(n)));let s={method:t,headers:a,cache:"default",credentials:"include",body:n};return new Promise((async(t,n)=>{let a=setTimeout((()=>n(new Error("Request timed out."))),i);try{t(await fetch(e,s))}catch(e){n(e)}finally{clearTimeout(a)}}))}}class u{constructor(e){return u.hash(e)}static hash(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}}var m=n(787),h=n.n(m);class g{static async getCurrent(){return void 0===window.PZ.account.currentUser&&(window.PZ.account.updatePromise||(window.PZ.account.updatePromise=g.update()),await window.PZ.account.updatePromise),window.PZ.account.currentUser}static getCurrentSync(){return window.PZ.account.currentUser}static clearCurrent(){delete window.PZ.account.currentUser,window.PZ.account.updatePromise=null}static async update(){try{var e=await p.call("/users/me","get");if(200!==e.status)window.PZ.account.currentUser=null;else{window.PZ.account.csrf=e.headers.get("X-CSRF-Token");var t=await e.text(),n=JSON.parse(t);window.PZ.account.currentUser=n}}catch(e){window.PZ.account.currentUser=null}}static loginRedirect(e,t){var n=new URLSearchParams;n.set("continue",e||location.pathname+location.search),loadContainer("/login?"+n.toString(),!0,t)}static generateAvatar(e,t,n){t||(t=50);var i=document.createElement("div");if(i.classList.add("avatar"),i.style.width=i.style.height=t+"px",e.userAvatarId){const n=document.createElement("img");n.setAttribute("loading","lazy"),n.onload=l.showImg,n.setAttribute("alt",e.name),n.src="https://blob.panzoid.com/avatars/"+e.userAvatarId+"_"+t+".jpg",i.appendChild(n)}else{var a=Math.abs(u.hash(e.name)),s=a%360,o=a%10+35;i.style.backgroundColor="hsl("+s+", 54%, "+o+"%)",i.style.lineHeight=t+"px",i.style.fontSize=.6*t+"px",i.innerText=e.name.substr(0,1).toUpperCase()}if(n)i.style.cursor="default";else{var r=document.createElement("a");r.setAttribute("href","/users/"+e.name),r.setAttribute("title",e.display),r.appendChild(i),i=r}return i}static generateModeratorImage(e){let t,n;return e.moderator&&(t=document.createElement("span"),n=l.generateIcon("shield"),n.classList.add("moderator"),t.appendChild(n),t.setAttribute("title","moderator")),t}static generateSubscriptionImage(e){let t;return e.hasSubscription&&(t=document.createElement("img"),t.classList.add("subscriber"),t.setAttribute("alt","subscriber"),t.setAttribute("title","subscriber"),t.src=h()),t}}g.updatePromise=null;class y{static generateTermUI(e){let t=document.createElement("div");t.style="text-align:right",t.appendChild(document.createTextNode("Billing term: "));let n=document.createElement("button");n.classList.add("term_toggle"),n.pz_cycle=12,t.appendChild(n);let i=document.createElement("span");i.innerText="Month",n.appendChild(i);let a=document.createElement("span");return a.innerText="Year",a.classList.add("selected"),n.appendChild(a),n.onclick=function(){this.pz_cycle=1===this.pz_cycle?12:1,i.classList.toggle("selected",1===this.pz_cycle),a.classList.toggle("selected",12===this.pz_cycle),e(this.pz_cycle)},t}static generateBenefitsUI(e,t){let n=document.createElement("ul");n.style="line-height:35px;";let i=(e,t)=>{let i=document.createElement("li");if(i.innerHTML=e,n.appendChild(i),t){let e=document.createElement("button");e.classList.add("info_button"),e.onclick=t,e.setAttribute("title","More information");let n=l.generateIcon("about");e.appendChild(n),i.appendChild(e)}};return i('<span style="font-weight:bold">'+e.storage+" cloud storage</span> for project assets"),i("Full access to all app features"),e.subscription&&(i("More simultaneous real-time users in your projects"),i("Ad-free editing"),i("Profile badge"),i("Discord role and subscriber channel access")),n}static generatePlanUI(e,t,n,i){let a=document.createElement("div");a.classList.add("plan"),a.classList.toggle("selected",i);let s=document.createElement("h3");s.classList.add("plan_name"),s.innerText=e.name,a.appendChild(s);let o=document.createElement("div");o.classList.add("plan_pricing"),e.monthlyPrice>0?o.innerHTML="$"+(.01*e.monthlyPrice).toFixed(2)+" <span>/mo<span> (billed "+(1===e.cycle?"monthly":"annually")+")":o.innerText="Free",a.appendChild(o);let r=this.generateBenefitsUI(e,t);a.appendChild(r);let d=document.createElement("div");if(d.style="text-align:center;",a.appendChild(d),i){let e=l.generateIcon("check");e.classList.add("check_circle"),d.appendChild(e)}else if(e.subscription){let e=document.createElement("button");e.classList.add("button"),e.style="line-height:30px;text-transform:capitalize;padding: 0 20px;",e.innerText="select",e.onclick=n,d.appendChild(e)}else{let e=document.createElement("a");e.href="/login",e.classList.add("button"),e.style="line-height:30px;text-transform:capitalize;padding: 0 20px;",e.innerText="Get started",e.onclick=()=>{},d.appendChild(e)}return a}static generatePlanComparisonUI(){let e=document.createElement("table");e.classList.add("plans"),e.classList.toggle("selected",selected);let t=document.createElement("h3");t.classList.add("plan_name"),t.innerText=plan.name,e.appendChild(t);let n=document.createElement("div");n.classList.add("plan_pricing"),plan.monthlyPrice>0?n.innerHTML="$"+(.01*plan.monthlyPrice).toFixed(2)+" <span>/mo<span> (billed "+(1===plan.cycle?"monthly":"annually")+")":n.innerText="Free",e.appendChild(n);let i=this.generateBenefitsUI(plan,infofn);e.appendChild(i);let a=document.createElement("div");if(a.style="text-align:center;",e.appendChild(a),selected){let e=l.generateIcon("check");e.classList.add("check_circle"),a.appendChild(e)}else if(plan.subscription){let e=document.createElement("button");e.classList.add("button"),e.style="line-height:30px;text-transform:capitalize;padding: 0 20px;",e.innerText="select",e.onclick=clickfn,a.appendChild(e)}else{let e=document.createElement("a");e.href="/login",e.classList.add("button"),e.style="line-height:30px;text-transform:capitalize;padding: 0 20px;",e.innerText="Get started",e.onclick=()=>{},a.appendChild(e)}return e}}function f(){var e=this;e.sections=["about","plans","terms","privacy","contact","feedback"];var t=document.getElementById("controls"),n=d.init(e.sections,o,2);t.appendChild(n),d.update(n,2),document.getElementById("feedback_send").onclick=async function(){this.style.visibility="hidden";var e={name:document.getElementById("feedback_name").value,email:document.getElementById("feedback_email").value,type:document.getElementById("feedback_type").selectedIndex,message:document.getElementById("feedback_message").value,source:100,category:0,version:"1"},t=await p.call("/feedback","post",e);document.getElementById("feedback_controls").style.display="none",200===t.status?document.getElementById("feedback_success").style.display="":document.getElementById("feedback_error").style.display=""},document.getElementById("contact_send").onclick=async function(){this.style.visibility="hidden";var e={name:document.getElementById("contact_name").value,email:document.getElementById("contact_email").value,message:document.getElementById("contact_message").value,type:0,source:999,category:0,version:"1"},t=await p.call("/feedback","post",e);document.getElementById("contact_controls").style.display="none",200===t.status?document.getElementById("contact_success").style.display="":document.getElementById("contact_error").style.display=""};let i=document.getElementById("plans_container"),a=s(12,(()=>g.loginRedirect()));function s(e,t,n){let i=document.createElement("div");i.classList.add("plans");let a=Object.keys(y.plans);for(let s=0;s<a.length;s++){let o=y.plans[a[s]];if(o.cycle!==e)continue;let r=y.generatePlanUI(o,null,t.bind(this,a[s]),n===o);i.appendChild(r)}return i}async function o(){var t=d.parsePath(),n=e.sections.indexOf(t.section)<0?e.sections[0]:t.section;if("plans"===n){let e=await g.getCurrent();if(e)return void loadContainer("/users/"+e.name+"/subscription",!0,!0)}var i=document.querySelector("a.selected");i&&i.classList.remove("selected"),document.querySelector("a[data-section='"+n+"']").classList.add("selected");for(var a=document.querySelectorAll(".aboutsection"),s=0;s<a.length;s++)a[s].style.display="none";document.getElementById(n).style.display=""}return i.appendChild(y.generateTermUI((e=>{a.remove(),a=s(e,(()=>g.loginRedirect("/about/plans"))),i.appendChild(a)}))),i.appendChild(a),o(),this}y.plans={___0:{name:"Basic",credits:0,subscription:!1,concurrentUsers:5,storage:"2GB",monthlyPrice:0,cycle:12,level:0},___1:{name:"Basic",credits:0,subscription:!1,concurrentUsers:5,storage:"2GB",monthlyPrice:0,cycle:1,level:0},d9wb:{name:"Starter",credits:360,subscription:!0,concurrentUsers:10,storage:"20GB",monthlyPrice:199,cycle:12,level:1},fxmb:{name:"Starter",credits:30,subscription:!0,concurrentUsers:10,storage:"20GB",monthlyPrice:399,cycle:1,level:1},t88m:{name:"Creator",credits:2400,subscription:!0,concurrentUsers:25,storage:"100GB",monthlyPrice:799,cycle:12,level:2},vvym:{name:"Creator",credits:200,subscription:!0,concurrentUsers:25,storage:"100GB",monthlyPrice:1199,cycle:1,level:2},"4tww":{name:"Pro",credits:6e3,subscription:!0,concurrentUsers:100,storage:"1TB",monthlyPrice:1199,cycle:12,level:3},"236w":{name:"Pro",credits:500,subscription:!0,concurrentUsers:100,storage:"1TB",monthlyPrice:1799,cycle:1,level:3}},f.pageContent=s();var v=n(457),b=n.n(v);class w{static generateListItem(e,t){var n=document.createElement("div");n.classList.add("creationItem");var i=document.createElement("a");i.setAttribute("class","creation"),i.setAttribute("href","/creations/"+e.creationId),i.onclick=t;var a=document.createElement("img");a.onload=l.showImg,a.src="https://blob.panzoid.com/creation-thumbnails/"+e.creationId+".jpg",i.appendChild(a);var s=document.createElement("a");s.classList.add("creationTitle"),s.setAttribute("href","/creations/"+e.creationId),s.innerText=e.title,s.onclick=t||linkNavigate;var o=document.createElement("a");return o.classList.add("creationUser"),o.setAttribute("href","/users/"+encodeURI(e.user.name)),o.onclick=linkNavigate,o.innerText=e.user.display||e.user.name,n.appendChild(i),n.appendChild(s),n.appendChild(o),n}static loadItem(e,t){}static async loadList(e){try{var t=await p.call("/creations?"+e,"get");if(200===t.status)return await t.json()}catch(e){}}static async postButtonClick(e){var t=this.getAttribute("data-action"),n=await g.getCurrent();if("flag"===t&&0===e.detail||n){var i,a=parseInt(this.parentNode.getAttribute("data-postid"));if("like"===t)this.classList.contains("liked")?(this.classList.remove("liked"),this.setAttribute("title","like this creation"),(i=this.querySelector("span")).innerText=parseInt(i.innerText)-1,p.call("/creations/"+a+"/actions/like","delete")):(this.classList.add("liked"),this.setAttribute("title","unlike this creation"),(i=this.querySelector("span")).innerText=parseInt(i.innerText)+1,p.call("/creations/"+a+"/actions","post",{actionType:0}));else if("flag"===t)e.detail>0&&(await p.call("/creations/"+a+"/actions","post",{actionType:1,actionSubtype:e.detail-1}),(s=document.getElementById("creation_info")).style.display="none",(o=document.createElement("div")).innerText="Creation reported. Thank you for helping to keep our community civil!",o.style="text-align: center;padding: 100px 10px;color: #495057;border-bottom: 1px solid #ced4da;",s.parentElement.insertBefore(o,s));else if("edit"===t);else if("delete"===t&&e.detail>0){let t=0|parseInt(this.getAttribute("data-offset"));var s,o;await p.call("/creations/"+a+"/actions","post",{actionType:2,actionSubtype:e.detail-1+t}),(s=document.getElementById("creation_info")).style.display="none",(o=document.createElement("div")).innerText="Creation deleted.",o.style="text-align: center;padding: 100px 10px;color: #495057;border-bottom: 1px solid #ced4da;",s.parentElement.insertBefore(o,s)}}else g.loginRedirect()}static async followButtonClick(){if(await g.getCurrent()){var e=window.currentPage.currentCreation.user;this.classList.contains("following")?(this.classList.remove("following"),this.setAttribute("title","follow"),this.innerText="Follow",p.call("/users/me/following/"+e.name,"delete")):(this.classList.add("following"),this.setAttribute("title","Unfollow"),this.innerText="Unfollow",p.call("/users/me/following","post",{username:e.name}))}else g.loginRedirect()}}w.tools=[{name:"clipmaker",color:"#e03131"},{name:"backgrounder",color:"#0c8599"}],w.categories=[{name:"upbeat"},{name:"insane"},{name:"chill"},{name:"outro"},{name:"transition"},{name:"title"}];class E{static async init(){E.loaded=!1,E.slots=[],E.first=!1,window.freestar=window.freestar||{},freestar.hitTime=Date.now(),freestar.queue=freestar.queue||[],freestar.config=freestar.config||{},freestar.debug=-1!==window.location.search.indexOf("fsdebug"),freestar.initCallback=()=>E.loaded=!0,this.adsReady=new Promise((function(e,t){E.loaded?e():freestar.initCallback=function(){E.loaded=!0,e()}})),freestar.config.enabled_slots=["Panzoid_creationlist_970x90_728x90_468x60_320x50_300x75","Panzoid_discussionpost_728x90_468x60_320x50_300x75","Panzoid_tool_970x90_728x90_468x60_320x50_300x75","Panzoid_home_970x90_728x90_468x60_320x50","Panzoid_creationpost_336x280_320x50_300x250_300x100_250x250_200x200_180x150"];let e=await g.getCurrent();var t,n,i,a;e&&e.hasSubscription||(window,n=(t=document).getElementsByTagName("script")[0],i=t.createElement("script"),a="https://a.pub.network/Panzoid-com",a+=freestar.debug?"/qa/pubfig.min.js":"/pubfig.min.js",i.async=!0,i.src=a,n.parentNode.insertBefore(i,n))}static unload(){E.slots.length&&(freestar.deleteAdSlots(E.slots),E.slots=[])}static async insert(e,t){await E.adsReady,t||(t=e),freestar.newAdSlots([{placementName:e,slotId:t}]),E.slots.push(t)}static async show(e,t){await E.adsReady,E.unload(),await E.insert(e,t)}}class C{static createDropdown(e,t,n=!1){function i(e){a(!(""===t.style.display),e)}function a(i,o){if(!1===i){t.pz_prevParent.append(t),t.style.display="none";var r=parseInt(e.getAttribute("data-selected"));return e.dispatchEvent(new CustomEvent("close",{detail:r})),void e.dispatchEvent(new CustomEvent("closeEx",{detail:{selected:r,chosen:!!o}}))}t.pz_prevParent=t.parentElement,t.style.display="",t.onclick=function(){s(),a(!1,!0)};var l=t.querySelector("li.active");l&&l.classList.remove("active"),r=parseInt(e.getAttribute("data-selected")),t.children[r].classList.add("active"),class{static positionPopup(e,t,n=!1){var i=t.offsetHeight,a=e.offsetHeight,s=t.ownerDocument.documentElement,o=s.clientWidth,r=s.clientHeight,l=e.getBoundingClientRect();const d=Math.min(parseFloat(getComputedStyle(t).maxWidth)||400,.9*o),c={top:l.top,left:l.left};c.top+=a,n&&(c.left-=d-l.width),(c.left<0||c.left+d>o)&&(c.left=Math.max(0,c.left-(c.left+d-o))),c.top-=Math.min(c.top,c.top+i>r&&r>i?Math.abs(i+a-0):0),document.body.append(t),t.style.left=c.left+"px",t.style.top=c.top+document.documentElement.scrollTop+"px",t.style.width=d+"px",t.style.position="absolute"}}.positionPopup(e,t,n)}function s(){var n=t.querySelector("li.active"),i=Array.prototype.indexOf.call(t.children,n);i!==parseInt(e.getAttribute("data-selected"))&&(e.setAttribute("data-selected",i),e.dispatchEvent(new CustomEvent("change",{detail:i})))}function o(){this.parentNode.querySelector("li.active").classList.remove("active"),this.classList.add("active")}function r(e){e.preventDefault()}null===e.getAttribute("data-selected")&&e.setAttribute("data-selected","0"),e.pz_setValue=function(n){"object"==typeof n&&(n=Array.from(t.children).findIndex((e=>e.pz_data===n))),e.setAttribute("data-selected",n),e.dispatchEvent(new CustomEvent("change",{detail:n}))},e.pz_getValue=function(){let n=e.getAttribute("data-selected"),i=t.children[n];return i.pz_data?i.pz_data:n},t.style.overflowY="auto",t.style.boxSizing="border-box",e.onclick=function(e){i()},e.onkeydown=function(n){switch(n.key){case"ArrowDown":if(r=t.querySelector("li.active"))r.classList.remove("active");else{var o=parseInt(e.getAttribute("data-selected"));r=t.children[o]}(r=r.nextElementSibling||t.firstElementChild).classList.add("active"),s(),""!==t.style.display&&a(!1,!0);break;case"ArrowUp":var r;(r=t.querySelector("li.active"))?r.classList.remove("active"):(o=parseInt(e.getAttribute("data-selected")),r=t.children[o]),(r=r.previousElementSibling||t.lastElementChild).classList.add("active"),s(),""!==t.style.display&&a(!1,!0);break;case"Enter":case" ":i(!0);break;case"Escape":a(!1);break;default:return}n.preventDefault()},e.onblur=function(){""===t.style.display&&a(!1)};for(var l=t.querySelectorAll("li"),d=0;d<l.length;d++)l[d].onmousedown=r,l[d].onmousemove=o}}const x="https://blob.panzoid.com";function k(){var e=this;e.listParam={page:0,pageSize:15,tool:0,category:0,section:0},e.sections=[{name:"trending",id:0},{name:"latest",id:1},{name:"top",id:2},{name:"following",id:3,hideForAnonymous:!0},{name:"liked",id:7,hideForAnonymous:!0},{name:"search",id:4}],e.currentCreation=null,e.itemLink=function(){var t=this.pathname.split("/"),n=parseInt(t[2]);return history.replaceState({scroll:window.scrollY},"",location.pathname+location.search),e.setUI(!0),e.loadItem(n,e.itemLink),history.pushState({},"","/creations/"+n),ga("set","page","/creations/"+n),ga("send","pageview"),!1},e.scrollHandler=function(t){if(e.more&&null!==e.more.offsetParent&&!(e.creations.length>=250)){var n=e.more.offsetTop+e.more.clientHeight;window.pageYOffset+window.innerHeight>n-10&&e.more.click()}},e.loadList=async function(t){var n=document.getElementById("creationlist"),i=new URLSearchParams(location.search),a=d.parsePath();""===a.section&&(a.section="trending");var s=new URLSearchParams;const o=e.sections.find((e=>e.name===a.section)),r=o?o.id:-1;if(s.set("page",e.params?e.params.get("page"):0),s.set("pageSize",12),i.has("tool")&&s.set("tool",i.get("tool")),i.has("category")&&s.set("category",i.get("category")),i.has("q")&&s.set("query",i.get("q")),s.set("section",r),s.sort(),(t||!e.params||e.params.toString()!==s.toString())&&(s.set("page",e.params&&t?parseInt(e.params.get("page"))+1:0),"search"!==a.section||i.get("q"))){if(!t)for(e.creations=[];n.firstChild;)n.removeChild(n.firstChild);e.more||(e.more=document.createElement("button"),e.more.onclick=e.loadList.bind(e,!0),e.more.innerText="show more",e.more.classList.add("more"),n.parentNode.insertBefore(e.more,n.nextSibling),addEventListener("scroll",e.scrollHandler)),e.more.style.display="none";var c=document.createElement("div");c.appendChild(l.generateIcon("loading")),c.classList.add("loading"),n.parentNode.insertBefore(c,n.nextSibling);var p=await w.loadList(s);if(n.parentNode.removeChild(c),e.params=s,Array.prototype.push.apply(e.creations,p),!p||0===p.length){var u=document.createElement("div");return u.innerText=p?"No creations found.":"There was a problem retreiving creations.",u.classList.add("emptymessage"),void n.appendChild(u)}for(var m=0;m<p.length;m++)if(n.appendChild(w.generateListItem(p[m],e.itemLink)),5===m&&parseInt(s.get("page"))<5){var h=document.createElement("div");h.style="flex-basis: 100%;margin: 10px 0;";var g=document.createElement("div");g.style="text-align:center;min-height:90px;",g.id="creationlist"+s.get("page"),h.appendChild(g),n.appendChild(h),t?E.insert("Panzoid_creationlist_970x90_728x90_468x60_320x50_300x75",g.id):E.show("Panzoid_creationlist_970x90_728x90_468x60_320x50_300x75",g.id)}p.length===parseInt(s.get("pageSize"))&&(e.more.style.display="")}},e.loadItem=async function(t){t=parseInt(t);var n=null;if(e.creations)for(var i=0;i<creations.length;i++)creations[i].creationId===t&&(n=creations[i]);var a=document.getElementById("creation_info");a.style.display="",a.previousElementSibling&&a.parentElement.removeChild(a.previousElementSibling),n&&(document.getElementById("creation_title").innerText=n.title,document.title=n.title,(o=document.getElementById("creation_thumbnail")).onload=l.showImg,o.setAttribute("src",x+"/creation-thumbnails/"+t+".jpg"));var s=await p.call("/creations/"+t,"get");if(200!==s.status)throw loadContainer("/error"),s.status;var o,r=await s.json();e.currentCreation=r,window.pz_creationId=r.creationId,n||(document.getElementById("creation_title").innerText=e.currentCreation.title,document.title=e.currentCreation.title+" - Panzoid",(o=document.getElementById("creation_thumbnail")).onload=l.showImg,o.setAttribute("src",x+"/creation-thumbnails/"+t+".jpg"));var d=await g.getCurrent(),c=!1,u=!1;d&&(d.name===e.currentCreation.user.name&&(c=!0),!0===d.moderator&&(u=!0));var m=document.getElementById("creation_user_avatar"),h=g.generateAvatar(e.currentCreation.user);m.firstElementChild&&m.removeChild(m.firstElementChild),m.appendChild(h);var y=document.getElementById("creation_user_link");y.innerText=e.currentCreation.user.display||e.currentCreation.user.name,y.setAttribute("href","/users/"+e.currentCreation.user.name),document.getElementById("creation_user_subscriber").style.display=e.currentCreation.user.hasSubscription?"":"none";var f=document.getElementById("creation_user_follow");c?f.style.display="none":(f.style.display="",f.innerText="Follow",f.classList.remove("following"),e.currentCreation.user.selfFollowing&&(f.innerText="Unfollow",f.classList.add("following")),f.onclick=w.followButtonClick);for(var v=document.getElementById("creation_controls");v.firstChild;)v.removeChild(v.firstChild);v.style="justify-content: flex-start;",v.setAttribute("data-postid",t);var b=document.createElement("button"),k=l.generateIcon("like");b.appendChild(k);var I=document.createElement("span");if(I.innerText=e.currentCreation.likes,b.appendChild(I),b.onclick=w.postButtonClick,b.setAttribute("data-action","like"),b.setAttribute("title","like this creation"),e.currentCreation.selfLiked&&(b.classList.add("liked"),b.setAttribute("title","unlike this creation")),v.appendChild(b),!c){var _=document.createElement("button"),T=l.generateIcon("flag");if(_.appendChild(T),u){_.setAttribute("title","flag count");var L=document.createElement("span");L.innerText=e.currentCreation.flags,_.appendChild(L)}else _.setAttribute("data-action","flag"),_.setAttribute("title","privately report an issue with this creation"),C.createDropdown(_,document.getElementById("report")),_.addEventListener("close",w.postButtonClick);v.appendChild(_)}if(c||u){var P=document.createElement("button"),A=l.generateIcon("delete");P.appendChild(A),P.setAttribute("data-action","delete"),P.setAttribute("title","delete this creation"),u&&!c?(P.setAttribute("data-offset","1"),C.createDropdown(P,document.getElementById("report"))):C.createDropdown(P,document.getElementById("delete")),P.addEventListener("close",w.postButtonClick),v.appendChild(P)}document.getElementById("creation_date").innerText="Uploaded on "+l.dateString(new Date(e.currentCreation.createdAt)),document.getElementById("creation_views").innerText=e.currentCreation.views.toLocaleString()+" views",document.getElementById("creation_description").innerText=e.currentCreation.description;var S=document.getElementById("creation_open");if(!S.firstElementChild||"svg"!==S.firstElementChild.tagName.toLowerCase()){S.insertBefore(l.generateIcon("open"),S.firstChild);var B=document.getElementById("creation_open_options");C.createDropdown(B,document.getElementById("toolselection")),B.addEventListener("closeEx",(function(e){if(e.detail.chosen){var n=document.getElementById("toolselection"),i=(n.children[e.detail.selected]||n.children[0]).getAttribute("data-href");window.open(i+"?c="+t)}}))}S.href="/tools/clipmaker?c="+t,e.loadRelated(t),E.show("Panzoid_creationpost_336x280_320x50_300x250_300x100_250x250_200x200_180x150")},e.loadRelated=async function(t){for(var n=document.getElementById("suggestedlist");n.firstChild;)n.removeChild(n.firstChild);var i=document.createElement("div");i.appendChild(l.generateIcon("loading")),i.classList.add("loading"),n.parentNode.appendChild(i);var a=await p.call("/creations?section=6&query="+t+"&pageSize=8","get"),s=await a.json();i.parentElement.removeChild(i);for(var o=0;o<s.length;o++){var r=s[o],d=w.generateListItem(r,e.itemLink);if(r.user.name!==e.currentCreation.user.name){var c=d.querySelector("a.creationTitle"),u=document.createElement("div");u.classList.add("inspired"),u.appendChild(l.generateIcon("inspired"));var m=document.createElement("span");m.innerText="Original inspiration",u.appendChild(m),d.insertBefore(u,c)}d.style="flex-basis: 24%;",n.appendChild(d)}},e.setUI=function(e){document.getElementById("creation").style.display=e?"block":"none",document.getElementById("creations").style.display=e?"none":"block"},new URLSearchParams(location.search);var t=document.getElementById("tool"),n=document.getElementById("tooldd"),i=document.getElementById("category"),a=document.getElementById("categorydd");!function(){for(var s=0;s<w.tools.length;s++){var o=document.createElement("li"),r=document.createElement("span");r.classList.add("category"),r.style.backgroundColor=w.tools[s].color,o.appendChild(r);var l=document.createTextNode(w.tools[s].name);o.appendChild(l),n.appendChild(o)}for(C.createDropdown(t,n),t.addEventListener("change",(function(e){t.innerHTML=n.children[e.detail].innerHTML})),t.addEventListener("close",(function(t){const n=new URLSearchParams(location.search);n.set("tool",t.detail>0?t.detail:""),history.pushState({},"",location.pathname+"?"+n.toString()),e.loadList()})),s=0;s<w.categories.length;s++)o=document.createElement("li"),l=document.createTextNode(w.categories[s].name),o.appendChild(l),a.appendChild(o);C.createDropdown(i,a),i.addEventListener("close",(function(t){var n=new URLSearchParams(location.search);n.set("category",t.detail>0?t.detail:void 0),history.pushState({},"",location.pathname+"?"+n.toString()),e.loadList()}))}(),location.pathname.split("/");var s=document.getElementById("controls");let o;const r=g.getCurrent().then((t=>{o=d.init(e.sections.filter((e=>!e.hideForAnonymous||!!t)).map((e=>e.name)),e.loadList,2),s.firstElementChild.appendChild(o)}));return e.navigate=async function(s){await r,d.update(o,2);var l=new URLSearchParams(location.search),c=parseInt(l.get("tool"))||0;c%=n.children.length,t.setAttribute("data-selected",c),t.innerHTML=n.children[c].innerHTML;var p=parseInt(l.get("category"))||0;p%=a.children.length,i.setAttribute("data-selected",p),i.innerHTML=a.children[p].innerHTML;var u=location.pathname.split("/");if("creations"===u[1]){var m=parseInt(u[2]);m?(e.setUI(!0),e.loadItem(m)):(e.setUI(!1),e.loadList(),document.title="Creations - Panzoid"),s&&void 0!==s.state.scroll&&window.scrollTo(window.scrollX,s.state.scroll)}else loadContainer(location.pathname)},removeEventListener("popstate",defaultPopState),addEventListener("popstate",e.navigate),e.unload=function(){removeEventListener("scroll",e.scrollHandler),removeEventListener("popstate",e.navigate),addEventListener("popstate",defaultPopState),E.unload()},e.navigate(),e}k.pageContent=b();var I=n(172),_=n.n(I);function T(e){return new Promise((function(t,n){let i=0;function a(){++i>=e.length&&t()}for(let t=0;t<e.length;t++){const i=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(i),i.onload=a,i.onerror=n,i.src=e[t]}}))}const L={report_private:[{title:"Report to Moderators",description:"Privately share this post with a moderator to report abuse or misuse of private messages."}],report:[{title:"It's Inappropriate",description:"This post contains content that a reasonable person would consider offensive, abusive, or a violation of our community guidelines."},{title:"It's Spam",description:"This post is an advertisment or vandalism."},{title:"Something Else",description:"This post is problematic for another reason."}],lock:[{title:"Close this discussion",description:"Further replies will be disabled."}],unlock:[{title:"Reopen this discussion",description:null}],pin:[{title:"Pin this discussion",description:"This discussion will stay at the top for all users until read."}],unpin:[{title:"Unpin this discussion",description:null}],delete:[{title:"Delete this post",description:null}],undelete:[{title:"Undelete this post",description:null}]};class P extends Error{}class A{static getDropdownEl(e){const t=`dd_${e}`;let n=document.getElementById(t);if(!n){n=document.createElement("ul"),n.style.display="none",n.setAttribute("id",t),n.classList.add("actiondd");const i=document.createElement("li");i.innerText="Cancel",n.appendChild(i);const a=L[e];for(let e=0;e<a.length;e++){const t=document.createElement("li"),i=document.createElement("b");i.innerText=a[e].title,t.appendChild(i),a[e].description&&(t.appendChild(document.createElement("br")),t.appendChild(document.createTextNode(a[e].description))),n.appendChild(t)}document.getElementById("container").appendChild(n)}return n}static async onDiscussionCreated(e){let t=window.currentPage.itemLink,n=document.getElementById("discussions");if(n){let i=await this.generateListItem(e,t),a=n.firstElementChild.nextElementSibling;n.insertBefore(i,a)}window.currentPage.currentDiscussion===e&&location.pathname.split("/")[2]!==e.discussionId&&history.replaceState({},"Panzoid",`/discussions/${e.discussionId}`+location.search)}static initTitleEditUI(e,t){t.classList.add("editable"),t.setAttribute("tabindex","0"),t.addEventListener("paste",(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t)})),t.onfocus=()=>{if(!t.classList.contains("saving")&&(t.setAttribute("contenteditable","true"),t.onblur=()=>{t.setAttribute("contenteditable","false");const n=t.innerText.trim();if(n!==e.title){const i=e.title;e.title=n,e.discussionId&&(t.classList.add("saving"),A.submitDiscussion(e).catch((()=>{e.title=i,t.innerText=i})).finally((()=>{t.classList.remove("saving")})))}""===n&&(t.innerText="Enter a title")},t.onkeydown=n=>{"Escape"===n.key?(t.innerText=e.title,t.blur()):"Enter"===n.key&&t.blur()},""===e.title.trim())){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n)}}}static initCategoryEditUI(e,t){t.classList.add("editable"),t.setAttribute("tabindex","0");const n=document.getElementById("editor_categorydd");C.createDropdown(t,n),t.addEventListener("change",(function(e){const i=n.children[e.detail].pz_data;t.innerHTML="",A.generateCategoryItem(i,t)})),t.addEventListener("close",(function(i){const a=e.categoryId,s=n.children[i.detail].pz_data;e.categoryId!==s.id&&(e.categoryId=s.id,t.innerHTML="",A.generateCategoryItem(s,t),e.discussionId&&(t.classList.add("saving"),A.submitDiscussion(e).catch((()=>{e.categoryId=a,t.innerHTML="",A.generateCategoryItem(a,t)})).finally((()=>{t.classList.remove("saving")}))))}))}static createDiscussionAttributes(e,t){if(t.needsApproval){const t=l.generateIcon("pending-message");t.title="Needs Approval",e.appendChild(t)}if(t.pinned){const t=l.generateIcon("pin");t.title="Pinned",e.appendChild(t)}if(t.locked){const t=l.generateIcon("lock");t.title="Closed",e.appendChild(t)}if(2===t.type){const t=l.generateIcon("people");t.title="Private Message",e.appendChild(t)}}static onDiscussionUpdated(e){if(document.getElementById("discussions"),document.getElementById("discussion")?.pz_discussion?.discussionId===e.discussionId){let t=document.getElementById("discussion_title");t.innerHTML="";const n=document.createElement("span");A.createDiscussionAttributes(n,e),t.append(n);const i=document.createElement("h1");"string"==typeof e.title?i.innerText=e.title||"Enter a title":i.innerText="Private Discussion",i.style.fontSize="26px",i.style.margin="0",t.append(i);const a=document.createElement("div"),s=document.createElement("div");s.classList.add("category"),A.generateCategoryItem(e.categoryId,s),a.append(s),e.private||2===e.type||t.append(a),g.getCurrent().then((t=>{document.getElementById("discussion").pz_discussion===e&&(!e.discussionId||t&&(e.user.name===t.name||t.moderator))&&("string"==typeof e.title&&A.initTitleEditUI(e,i),A.initCategoryEditUI(e,s))})),document.title=(e.title||"Discussion")+" - Panzoid"}}static onDiscussionDeleted(e){document.getElementById("discussions")}static async onPostCreated(e){document.getElementById("discussions");let t=document.getElementById("discussion");if(t&&t.pz_discussion.discussionId===e.discussion?.discussionId){let n=document.getElementById("discussion_posts"),i=await A.generatePostItem(e,t.pz_discussion);n.appendChild(i)}}static async onPostUpdated(e){const t=Array.from(document.getElementsByClassName("post")).filter((t=>!!t.pz_post&&t.pz_post.discussionPostId===e.discussionPostId));for(let n=0;n<t.length;n++){const i=t[n],a=await A.generatePostItem(e,window.currentPage.currentDiscussion);i.parentElement.insertBefore(a,i.nextElementSibling),i.remove()}}static onPostDeleted(e){}static generateCategoryItem(e,t,n){if("object"!=typeof e&&(e=this.categories.find((t=>t.id===e))),!e)return;if(e.color){let n=document.createElement("span");n.classList.add("category"),n.style.backgroundColor=e.color,t.appendChild(n)}let i=document.createTextNode(e.name);if(t.appendChild(i),n&&e.description){let n=document.createElement("div");n.innerText=e.description,n.style="max-width: 300px; margin-top: 2px; font-size: 14px;",t.appendChild(n)}}static async generateListItem(e,t){var n=document.createElement("tr"),i=document.createElement("td");i.setAttribute("colspan","1"),A.createDiscussionAttributes(i,e);const a=9===e.categoryId;var s=document.createElement("a");const o=!a&&e?.self?.highestPost>1?`/${e.self.highestPost}`:"";s.setAttribute("href",`/discussions/${e.discussionId}${o}`),s.innerText=e.title,s.onclick=t,i.appendChild(s);var r=e.categoryId;if(r>=6){let e=document.createElement("div");e.classList.add("category"),this.generateCategoryItem(r,e),i.appendChild(e)}await g.getCurrent()&&e.self&&new Date(e.self.lastVisitAt)>=new Date(e.lastPostAt)&&s.classList.add("seen"),e.deleteAction&&s.classList.add("deleted"),n.appendChild(i);const d=document.createElement("td"),c=g.generateAvatar(e.user,30);if(d.classList.add("users"),d.appendChild(c),e.featuredUsers)for(let t=0;t<e.featuredUsers.length;t++){const n=g.generateAvatar(e.featuredUsers[t],30);d.appendChild(n)}if(e.lastPostUser.name!==e.user.name){const t=g.generateAvatar(e.lastPostUser,30);t.classList.add("lastPoster"),d.appendChild(t)}else c.classList.add("lastPoster");n.appendChild(d);var p=document.createElement("td");p.classList.add("num"),p.innerText=e.postCount-1,n.appendChild(p);var u=document.createElement("td");return u.classList.add("num"),u.appendChild(l.generateDate(new Date(e.lastPostAt))),n.appendChild(u),n}static async generateCategoryListItem(e,t){var n=document.createElement("div");n.style="margin: 3px 0;";var i=document.createElement("a");i.setAttribute("href","/discussions/"+e.discussionId),i.innerText=e.title,i.onclick=t,await g.getCurrent()&&e.self&&new Date(e.self.lastVisitAt)>=new Date(e.lastPostAt)&&i.classList.add("seen"),e.deleteAction&&i.classList.add("deleted"),n.appendChild(i);var a=l.generateDate(new Date(e.lastPostAt));return a.style="margin-left: 5px",n.appendChild(a),n}static generateRecentListItem(e,t){const n=document.createElement("tr"),i=document.createElement("td"),a=g.generateAvatar(e.lastPostUser);a.onclick=t,i.appendChild(a),n.appendChild(i);const s=document.createElement("td"),o=9===e.categoryId,r=document.createElement("a");r.style="display: inline-block; padding: 5px 0;";const d=!o&&e.self&&e.self.highestPost>1?`/${e.self.highestPost}`:"";r.setAttribute("href",`/discussions/${e.discussionId}${d}`),r.innerText=e.title,r.onclick=t,s.appendChild(r);let c=e.categoryId;if(c>=6){let e=document.createElement("div");e.style="font-size: 14px;",this.generateCategoryItem(c,e),s.appendChild(e)}n.appendChild(s);const p=document.createElement("td");return p.classList.add("num"),p.appendChild(l.generateDate(new Date(e.lastPostAt))),n.appendChild(p),n}static loadItem(e,t){}static async loadList(e,t=!1){try{const i=t?"/discussions/posts?":"/discussions?";var n=await p.call(i+e,"get");if(n.ok)return await n.json()}catch(e){}}static likesString(e){return e+" like"+(e>1?"s":"")}static createExpandedImage(e){const t=document.createElement("div");t.classList.add("post_image_expanded");const n=document.createElement("img");n.setAttribute("src",e.getAttribute("src")),n.setAttribute("alt",e.getAttribute("alt")),t.append(n);const i=e=>{"Escape"===e.key&&a(),e.preventDefault(),e.stopPropagation()};t.addEventListener("click",(e=>{e.target===t&&a()}));const a=()=>{document.body.removeEventListener("keydown",i),t.remove()};document.body.append(t),document.body.addEventListener("keydown",i)}static generatePostExcerpt(e,t=100){if(!window.markdownit)return null;const n=window.markdownit();let i=null;return n.renderer.rules.text=(e,n,a,s,o)=>{i||(i=e[n].content.slice(0,t),i.length<e[n].content.length&&(i+="..."))},n.render(e),i}static async generatePostMessage(e,t){window.markdownit||await T(["//cdnjs.cloudflare.com/ajax/libs/markdown-it/8.3.1/markdown-it.min.js","//cdnjs.cloudflare.com/ajax/libs/markdown-it-emoji/1.4.0/markdown-it-emoji.min.js","//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"]);let n=window.markdownit({linkify:!0,highlight:function(e,t){if(t&&hljs.getLanguage(t))try{return'<pre class="hljs"><code>'+hljs.highlight(t,e,!0).value+"</code></pre>"}catch(e){}}}).use(window.markdownitEmoji);const i=n.renderer.rules.image;n.renderer.rules.image=(e,t,n,a,s)=>{let o=i(e,t,n,a,s);return o=`<span class="post_image_container">${o}</span>`,o};const a=n.renderer.rules.link_open||function(e,t,n,i,a){return a.renderToken(e,t,n)};if(n.renderer.rules.link_open=(e,t,n,i,s)=>{const o=e[t],r=e[t].attrGet("href");return r.match(/^https:\/\/blob\.panzoid\.com\/discussion-uploads\/[\w-]+\.(?:mp4|webm)$/g)?`<span class="post_image_container"><video controls src="${r}" /></span>`:(r.startsWith("https://panzoid.com")||(o.attrPush(["target","_blank"]),e[t].attrPush(["rel","nofollow"])),a(e,t,n,i,s))},t){const e=n.renderer.rules.image;n.renderer.rules.image=(n,i,a,s,o)=>{const r=n[i];if(r.attrGet("src").startsWith("attachment://")){const e=r.attrGet("src"),n=t[e];n&&r.attrSet("src",n.blobUrl)}return e(n,i,a,s,o)};const i=n.renderer.rules.link_open;n.renderer.rules.link_open=(e,n,a,s,o)=>{const r=e[n].attrGet("href");return r.startsWith("attachment://")&&(r.endsWith(".mp4")||r.endsWith(".webm"))?`<span class="post_image_container"><video controls src="${t[r].blobUrl}" /></span>`:i(e,n,a,s,o)}}return n.render(e)}static async generatePostItem(e,t){const n=document.createElement("div");n.classList.add("post"),n.pz_post=e,n.setAttribute("data-postnum",e.postNumber);let i=!1;1===e.postNumber&&t&&(n.classList.add("firstpost"),e.discussion&&9===e.discussion.categoryId&&(i=!0));const a=document.createElement("div");if(a.classList.add("post_anchor"),n.append(a),e.user&&!i){const t=document.createElement("div");t.classList.add("post_col_avatar");const i=g.generateAvatar(e.user);t.append(i),n.append(t)}const s=document.createElement("div");s.classList.add("post_col_message");const o=g.getCurrentSync();if(!i||o&&o.moderator){const n=document.createElement("div");n.classList.add("post_info");const i=document.createElement("div"),a=g.generateAvatar(e.user);a.classList.add("compact"),i.append(a);const o=document.createElement("a");o.innerText=e.user.display||e.user.name,o.setAttribute("href","/users/"+e.user.name),o.style="color: inherit; font-weight: bold;",i.append(o);let r=g.generateModeratorImage(e.user);r&&i.append(r);let d=g.generateSubscriptionImage(e.user);if(d&&i.append(d),n.append(i),e.discussion&&t!==e.discussion){const t=document.createElement("span");t.classList.add("post_reply_info");const i=document.createElement("span");if(i.innerText=e.postNumber>1?"posted in":"created",t.append(i),2===e.discussion.type){const e=document.createElement("span");e.style.display="contents";const n=l.generateIcon("people");e.append(n),e.title="Private Discussion",t.append(e)}if(e.discussion.lastPostAt&&(new Date).valueOf()-new Date(e.discussion.lastPostAt).valueOf()>2592e6){const n=document.createElement("span");n.style.display="contents";const i=l.generateIcon("history");n.append(i),n.title=`Last Post At: ${l.dateString(new Date(e.discussion.lastPostAt))}`,t.append(n)}const a=document.createElement("a");a.classList.add("discussion_link"),a.innerText=e.discussion.title;const s=e.postNumber>1?`/${e.postNumber}`:"";a.setAttribute("href",`/discussions/${e.discussion.discussionId}${s}`),e.discussion.deleteAction&&a.classList.add("deleted"),t.append(a),n.append(t)}if(e.replyToPost){const i=document.createElement("span");i.classList.add("post_reply_info");const a=l.generateIcon("reply");i.append(a);const s=document.createElement("a");s.href=`/discussions/${t.discussionId}/${e.replyToPost.postNumber}`,s.onclick=window.currentPage.itemLink??null;const o=g.generateAvatar(e.replyToPost.user,30,!0);s.append(o);const r=document.createElement("span");r.classList.add("user_display"),r.innerText=e.replyToPost.user.display||e.replyToPost.user.name,s.append(r);const d=document.createElement("span");d.classList.add("message"),d.innerText=A.generatePostExcerpt(e.replyToPost.message,99),s.append(d),i.append(s),n.append(i)}const c=document.createElement("div"),p=document.createElement("a");p.href=`/discussions/${e.discussion.discussionId}/${e.postNumber}`,p.onclick=window.currentPage.itemLink??null,p.append(l.generateDate(new Date(e.createdAt))),c.append(p),n.append(c),s.append(n)}const r=document.createElement("div");if(r.classList.add("post_message"),e.message){r.innerHTML=await this.generatePostMessage(e.message);const t=r.querySelectorAll(".post_image_container > img");for(let e=0;e<t.length;e++)t[e].title="Click to expand",t[e].addEventListener("click",(e=>{A.createExpandedImage(e.currentTarget)}))}else{const e=document.createElement("div");e.classList.add("post_infomessage");const t=l.generateIcon("error");e.append(t);const n=document.createElement("span");n.innerText="Message content is private.",e.append(n),s.append(e)}if(s.append(r),n.append(s),!e.discussion)return n;var d=document.createElement("div");d.classList.add("post_controls"),s.append(d);var c=document.createElement("button");c.innerText=A.likesString(e.likes),c.style.display=e.likes>0?"":"none",c.setAttribute("data-action","togglelikes"),c.onclick=A.postButtonClick,d.append(c);var p=await g.getCurrent(),u=!1,m=!1;if(p&&(p.name===e.user.name&&(u=!0),!0===p.moderator&&(m=!0)),!u&&!e.selfReported){if(e.message){var h=document.createElement("button"),y=l.generateIcon("like");h.append(y),h.setAttribute("data-action","like"),h.setAttribute("title","Like this post"),h.onclick=A.postButtonClick,e.selfLiked&&(h.classList.add("liked"),h.setAttribute("title","Unlike this post")),d.append(h)}var f=document.createElement("button"),v=l.generateIcon("flag");if(f.append(v),m){v.style.fill="#c92a2a",f.setAttribute("data-action","toggleflags"),f.setAttribute("title","Toggle flag counts");var b=document.createElement("span");b.innerText=e.flags,f.style.display=e.flags>0?"":"none",f.onclick=A.postButtonClick,f.append(b)}else{f.setAttribute("data-action","flag"),f.setAttribute("title","Privately report an issue with this post");const t=2===e.discussion.type?"report_private":"report";C.createDropdown(f,A.getDropdownEl(t),!0),f.addEventListener("close",A.postButtonClick)}d.append(f)}if(t&&!t.locked&&t===e.discussion){const i=document.createElement("button"),a=l.generateIcon("reply");i.append(a),i.setAttribute("data-action","reply"),i.setAttribute("title","Reply to this post"),i.onclick=()=>{document.getElementById("discussion_controls").style.display="";const i=document.querySelector("div.post_reply_init");if(i){i.parentElement.classList.add("active"),i.style.display="none",n.classList.add("replying");const a=A.createPostEditEl({discussionPostId:null,discussion:t,replyToPost:e.postNumber>1?e:null,message:""},null,(()=>{i.parentElement.classList.remove("active"),a.remove(),n.classList.remove("replying"),i.style.display=""}));i.parentElement.insertBefore(a,i.nextElementSibling)}},d.append(i)}if(u){var w=document.createElement("button"),E=l.generateIcon("edit");w.append(E),w.setAttribute("data-action","edit"),w.setAttribute("title","Edit this post"),w.onclick=A.postButtonClick,d.append(w)}if(m){if(m&&1===e.postNumber){var x=document.createElement("button"),k=l.generateIcon("lock");x.append(k),e.discussion.locked?(x.setAttribute("data-action","unlock"),x.setAttribute("title","Unlock this discussion"),C.createDropdown(x,A.getDropdownEl("unlock"),!0)):(x.setAttribute("data-action","lock"),x.setAttribute("title","Lock this discussion"),C.createDropdown(x,A.getDropdownEl("lock"),!0)),x.addEventListener("close",A.postButtonClick),d.append(x);var I=document.createElement("button"),_=l.generateIcon("pin");I.append(_),e.discussion.pinned?(I.setAttribute("data-action","unpin"),I.setAttribute("title","Unpin this discussion"),C.createDropdown(I,A.getDropdownEl("unpin"),!0)):(I.setAttribute("data-action","pin"),I.setAttribute("title","Pin this discussion"),C.createDropdown(I,A.getDropdownEl("pin"),!0)),I.addEventListener("close",A.postButtonClick),d.append(I)}if(u||!e.needsApproval){var T=document.createElement("button"),L=l.generateIcon("delete");T.append(L),m&&e.deleteAction?(T.setAttribute("data-action","undelete"),T.setAttribute("title","Unhide this post"),C.createDropdown(T,A.getDropdownEl("undelete"),!0)):(T.setAttribute("data-action","delete"),T.setAttribute("title","Delete this post"),m&&!u?(T.setAttribute("data-offset","1"),C.createDropdown(T,A.getDropdownEl("report"),!0)):C.createDropdown(T,A.getDropdownEl("delete"),!0)),T.addEventListener("close",A.postButtonClick),d.append(T)}}const P=e.needsApproval&&!e.discussion.deleteAction||e.discussion.needsApproval&&1===e.postNumber;if(P||e.deleteAction||e.selfReported){const t=document.createElement("div");if(t.classList.add("post_infomessage"),P){const n=l.generateIcon("pending-message");t.append(n);const i=document.createElement("span");i.innerText=e.needsApproval?"This post is pending moderator approval.":"This discussion is pending moderator approval.",t.append(i)}else if(e.deleteAction){const n=l.generateIcon("error");t.append(n);const i=["inappropriate","spam","not suitable for this site"][e.deleteAction.actionSubtype-1],a=document.createElement("span");a.innerText="This post was hidden by a moderator because it is "+i+".",t.append(a)}else{const e=l.generateIcon("flag");t.append(e);const n=document.createElement("span");n.innerText="This post is not shown because you reported it.",t.append(n)}if(s.insertBefore(t,r),p.moderator&&P){const e=document.createElement("button"),n=l.generateIcon("check");n.style.fill="hsl(136deg 50% 35%)",e.append(n),e.title="Approve post",e.setAttribute("data-action","approve"),e.onclick=A.postButtonClick,t.append(e);const i=document.createElement("button"),a=l.generateIcon("remove");a.style.padding="2px",a.style.fill="hsl(0 50% 35%)",i.append(a),i.title="Hide post",i.setAttribute("data-action","disapprove"),C.createDropdown(i,A.getDropdownEl("report"),!0),i.addEventListener("close",A.postButtonClick),t.append(i)}else if(u){if(e.deleteAction){const e=document.createElement("button"),n=l.generateIcon("about");e.append(n),e.title="More information",e.style.cursor="pointer",e.onclick=function(){location.href="/discussions/45211"},t.append(e)}}else{const e=document.createElement("button"),n=l.generateIcon("visible");e.append(n),e.title="Show post content",e.onclick=function(){r.style.display="",d.style.display="",this.remove()},t.append(e),r.style.display="none",d.style.display="none"}}return n}static async loadDiscussionPosts(e,t){t=t||"";var n=await p.call("/discussions/"+e.discussionId+"/posts?"+t,"get");if(!n.ok)return null;const i=await n.json();for(let t=0;t<i.length;t++)i[t].discussion=e;return i}static async loadUnapprovedPosts(e){e=e||"";var t=await p.call("/discussions/posts/unapproved?"+e,"get");if(t.ok)return await t.json()}static highlightPost(e,t){const n=document.querySelectorAll(".post.highlight");for(let e=0;e<n.length;e++)n[e].classList.remove("highlight");window.pz_isScrolling=!0,e.firstElementChild.scrollIntoView(),setTimeout((()=>window.pz_isScrolling=!1),2e3),t&&e.classList.add("highlight")}static async loadLikes(e,t){var n=await p.call("/discussions/posts/"+e.discussionPostId+"/actions","get"),i=await n.json();if(t.parentNode){e.likes=i.length,this.innerText=A.likesString(e.likes),t.classList.add("post_likes");for(var a=0;a<i.length;a++){var s=g.generateAvatar(i[a],30);s.style.marginRight="5px",t.appendChild(s)}i.length>0&&t.appendChild(document.createTextNode("liked this."))}}static async loadFlags(e,t){var n=await p.call("/discussions/posts/"+e.discussionPostId+"/actions?actionType=1","get"),i=await n.json();if(!t.parentNode)return;t.classList.add("post_flags"),t.style.textAlign="right";const a=["Inappropriate","Spam","Something else"];for(let e in i){let n=document.createElement("span");n.style.fontWeight="bold",n.innerText=a[e]+": ",t.appendChild(n);let s=document.createTextNode(i[e]);t.appendChild(s)}}static createPostEditEl(e,t,n){e.discussion||(e.discussion=t);const i=document.createElement("div");if(i.classList.add("post_edit"),e.replyToPost&&!e.discussionPostId){const t=document.createElement("div");t.classList.add("post_edit_reply_info");const n=l.generateIcon("reply");t.append(n);const a=document.createElement("a");a.href=`/discussions/${e.discussion.discussionId}/${e.replyToPost.postNumber}`,a.onclick=()=>{const t=document.querySelector(`div.post[data-postnum='${e.replyToPost.postNumber}']`);return t&&A.highlightPost(t,!0),!1};const s=document.createElement("span");s.classList.add("user");const o=g.generateAvatar(e.replyToPost.user,30,!0);s.append(o);const r=document.createElement("span");r.innerText=e.replyToPost.user.display||e.replyToPost.user.name,s.append(r),a.append(s);const d=document.createElement("span");d.classList.add("message"),d.innerText=A.generatePostExcerpt(e.replyToPost.message),a.append(d),t.append(a),i.append(t)}const a=document.createElement("textarea");a.value=e.message,i.append(a);const s=document.createElement("div");s.classList.add("post_edit_controls");const o=document.createElement("span");s.append(o);const r=document.createElement("div");s.append(r);const d=document.createElement("button");d.classList.add("text_button"),d.innerText="Cancel",d.title="Cancel",d.onclick=()=>{n&&n()},r.appendChild(d);const c=document.createElement("button");return c.classList.add("button"),c.innerText=e.discussionPostId?"Save":"Post",c.onclick=()=>{r.remove();const t=a.pz_mde.value();if(e.discussion?.discussionId&&e.discussionPostId&&t===e.message)return void(n&&n());const i=document.createElement("div");i.append(l.generateIcon("loading")),i.classList.add("loading"),s.append(i),o.innerText="",e.message=t,A.submitPost(e,a.pz_attachmentMap).then((()=>{n&&n()})).catch((e=>{o.innerText=e instanceof P?e.message:"Something went wrong when posting, please try again later.",i.remove(),s.append(r)}))},r.append(c),i.append(s),A.setUpEditor(a),i}static async postButtonClick(e){const t=this.getAttribute("data-action"),n=this.closest(".post"),i=n.pz_post,a=i.discussion||window.currentPage.currentDiscussion;var s=await g.getCurrent();if("flag"===t&&0===e.detail||"togglelikes"===t||s){if("togglelikes"===t)(o=n.getElementsByClassName("post_likes")[0])?o.parentElement.removeChild(o):(o=document.createElement("div"),this.parentNode.parentNode.appendChild(o),A.loadLikes(i,o));else if("like"===t){var o=n.getElementsByClassName("post_likes")[0];if(this.classList.contains("liked")){if(this.classList.remove("liked"),this.setAttribute("title","like this post"),i.likes--,(l=this.previousElementSibling).innerText=A.likesString(i.likes),l.style.display=i.likes>0?"":"none",o)if(i.likes>0){for(var r=0;r<o.children.length;r++)if((d=o.children[r]).getAttribute("title")===s.name){o.removeChild(d);break}}else o.remove();await p.call("/discussions/posts/"+i.discussionPostId+"/actions/like","delete")}else{var l,d;this.classList.add("liked"),this.setAttribute("title","unlike this post"),i.likes++,(l=this.previousElementSibling).innerText=A.likesString(i.likes),l.style.display=i.likes>0?"":"none",o&&((d=g.generateAvatar(s,30)).style.marginRight="5px",o.insertBefore(d,o.lastElementChild.nextSibling)),await p.call("/discussions/posts/"+i.discussionPostId+"/actions","post",{actionType:0})}}else if("flag"===t){if(e.detail<=0)return;for(await p.call("/discussions/posts/"+i.discussionPostId+"/actions","post",{actionType:1,actionSubtype:e.detail-1});n.firstChild;)n.removeChild(n.firstChild);var c=document.createElement("span");c.innerText="Post reported. Thank you for helping to keep our community civil!",c.style="width:100%;text-align:center;color:#495057",n.appendChild(c)}else if("toggleflags"===t){var u=n.getElementsByClassName("post_flags")[0];u?u.parentElement.removeChild(u):(u=document.createElement("div"),this.parentNode.parentNode.appendChild(u),A.loadFlags(i,u))}else if("edit"===t){var m={discussionId:a.discussionId,discussionPostId:i.discussionPostId,button:"Save Changes",content:i.message};1===i.postNumber?(m.editAttributes=!0,m.title=a.title,m.category=a.categoryId):(m.editAttributes=!1,m.title="Edit post");const e=n.querySelector(".post_message");e.style.display="none";const t=n.querySelector(".post_controls");t.style.display="none";const s=A.createPostEditEl(i,a,(()=>{s.remove(),e.style.display="",t.style.display=""}));e.parentElement.insertBefore(s,e.nextElementSibling)}else if("delete"===t||"undelete"===t){if(e.detail<=0)return;const s=0|parseInt(this.getAttribute("data-offset"));for(1===i.postNumber&&await p.call("/discussions/"+a.discussionId+"/actions","post",{actionType:"delete"===t?0:1,actionSubtype:e.detail-1+s}),await p.call("/discussions/posts/"+i.discussionPostId+"/actions","post",{actionType:"delete"===t?2:3,actionSubtype:e.detail-1+s});n.firstChild;)n.removeChild(n.firstChild);const o=document.createElement("span");o.innerText=1===i.postNumber?"Discussion deleted.":"Post deleted.",o.classList.add("post_deleted_message"),o.style="",n.appendChild(o)}else if("lock"===t||"unlock"===t){if(e.detail<=0)return;let n="lock"===t?2:3;(await p.call("/discussions/"+parseInt(a.discussionId)+"/actions","post",{actionType:n,actionSubtype:e.detail-1})).ok&&(a.locked="lock"===t)}else if("pin"===t||"unpin"===t){if(e.detail<=0)return;let n="pin"===t?4:5;(await p.call("/discussions/"+parseInt(a.discussionId)+"/actions","post",{actionType:n,actionSubtype:e.detail-1})).ok&&(a.pinned="pin"===t)}else if("approve"===t||"disapprove"===t){if("disapprove"===t&&e.detail<=0)return;const s=n.querySelector(".post_infomessage");s.style.pointerEvents="none",s.style.opacity="0.5";try{if(a.needsApproval&&1===i.postNumber){const n="approve"===t?6:0;(await p.call("/discussions/"+a.discussionId+"/actions","post",{actionType:n,actionSubtype:e.detail})).ok&&(a.needsApproval=!1,A.onDiscussionUpdated(a),i.needsApproval||A.onPostUpdated(i))}if(i.needsApproval){const n="approve"===t?4:2;(await p.call("/discussions/posts/"+i.discussionPostId+"/actions","post",{actionType:n,actionSubtype:e.detail})).ok&&(i.needsApproval=!1,A.onPostUpdated(i))}}catch(e){console.log(e)}s.style.pointerEvents="",s.style.opacity="1.0"}}else g.loginRedirect()}static async processAttachment(e){try{const t=g.getCurrentSync();if(t&&t.moderator)if("image/webp"===e.type&&window.ImageDecoder&&ImageDecoder.isTypeSupported(e.type)){const t=new ImageDecoder({type:e.type,data:e.stream(),preferAnimation:!0}).tracks;if(await t.ready,t.selectedTrack.animated)return e}else if("video/mp4"===e.type||"video/webm"===e.type)return e;const n=await createImageBitmap(e),i=document.createElement("canvas");return i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(n,0,0),await new Promise(((e,t)=>{i.toBlob(e,"image/webp",.9)}))}catch(e){return console.error(e),null}}static async uploadAttachment(e){const t=new FormData;t.append("file",e);const n=await p.call("/discussions/uploads","post",t);if(!n.ok)throw new P("Failed to upload attachment.");return n.headers.get("Location")}static async uploadAllAttachments(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const i=e[t[n]];i.cloudUrl||(i.cloudUrl=await A.uploadAttachment(i.file)),i.blobUrl&&(URL.revokeObjectURL(i.blobUrl),i.blobUrl=null)}}static cleanUpAttachments(e,t){const n=Object.keys(e);for(let i=0;i<n.length;i++)t.includes(n[i])||(e[n[i]].blobUrl&&URL.revokeObjectURL(e[n[i]].blobUrl),delete e[n[i]])}static async setUpEditor(e){if(!window.EasyMDE){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://unpkg.com/easymde/dist/easymde.min.css"),document.head.append(e),await T(["https://unpkg.com/easymde/dist/easymde.min.js"])}const t={},n=new EasyMDE({autofocus:!0,element:e,uploadImage:!0,imageAccept:"image/png, image/jpeg, image/webp",sideBySideFullscreen:!1,minHeight:"200px",toolbar:["bold","italic","heading","|","code","quote","unordered-list","ordered-list","|","link","image","table","|","preview","side-by-side","|","guide"],shortcuts:{toggleFullScreen:null},imageUploadFunction:(e,n,i)=>{const a=g.getCurrentSync();e.type.startsWith("image/")||a&&a.moderator&&e.type.startsWith("video/")?this.processAttachment(e).then((s=>{const o=a&&a.moderator?5242880:1048576;if(!s)return void i("Image conversion failed.");if(s.size>o)return void i("Image size is too large.");const r=`attachment://${Object.keys(t).length}.${e.type.split("/").pop()}`;t[r]={file:s,blobUrl:URL.createObjectURL(s),cloudUrl:null},n(r)})):i("Upload type not supported.")},previewRender:(e,n)=>(A.generatePostMessage(e,t).then((e=>{n.innerHTML=e})),n.innerHTML)});return e.pz_mde=n,e.pz_attachmentMap=t,n}static replaceAttachmentUrls(e,t){const n=Object.keys(t);for(let i=0;i<n.length;i++){const a=t[n[i]];e=e.replaceAll(n[i],a.cloudUrl)}return e}static async submitDiscussion(e,t){if(e.title.length<10)throw new P("Title is too short, please enter a more descriptive title.");if(e.discussionId){const t=await p.call("/discussions/"+e.discussionId,"put",e);if(!t.ok)throw"bad_title"===await t.text()?new P("Please enter a more descriptive title."):new P("Could not update discussion, please try again later");A.onDiscussionUpdated(e)}else{const n=Object.assign({},e);let i;if(n.message=t.message,i=e.recipients?await p.call("/discussions/private","post",n):await p.call("/discussions","post",n),!i.ok)throw"bad_title"===await i.text()?new P("Please enter a more descriptive title."):new P("Could not create discussion, please try again later");{const n=await i.json();e.discussionId=n.discussion.discussionId,e.user=e.lastPostUser=await g.getCurrent(),e.createdAt=n.discussion.createdAt,t.discussionPostId=n.post.discussionPostId,t.user=await g.getCurrent(),t.createdAt=n.post.createdAt,t.postNumber=1,A.onDiscussionCreated(e),A.onPostCreated(t)}}}static async submitPost(e,t){if(e.message.length<10)throw new P("Message is too short.");if(t&&(A.cleanUpAttachments(t,e.message),await A.uploadAllAttachments(t),e.message=A.replaceAttachmentUrls(e.message,t)),e.discussion?.discussionId)if(e.discussionPostId){if(!(await p.call("/discussions/posts/"+e.discussionPostId,"put",e)).ok)throw new P("Could not update discussion post.");A.onPostUpdated(e)}else{const t=await p.call(`/discussions/${e.discussion.discussionId}/posts`,"post",{message:e.message,replyToDiscussionPostId:e.replyToPost?.discussionPostId});if(!t.ok)throw new P("Could not create discussion post.");e.discussionPostId=parseInt(await t.text()),e.user=await g.getCurrent(),e.createdAt=new Date((new Date).toUTCString().substr(0,25)),A.onPostCreated(e)}else await A.submitDiscussion(e.discussion,e)}}function S(){function e(e){return history.pushState({},"Discussions - Panzoid","/discussions"),linkNavigate.call(this,e)}function t(e){return history.pushState({},"Creations - Panzoid","/creations"),linkNavigate.call(this,e)}function n(){this.firstElementChild.style.display=""}function i(){this.firstElementChild.style.display="none"}!async function(){var t=document.getElementById("discussions_table"),n=document.createElement("div");n.classList.add("loading"),n.appendChild(l.generateIcon("loading")),t.parentNode.insertBefore(n,t.nextSibling);var i=await A.loadList("pageSize=15&section=9");if(i&&0!==i.length){for(var a=0;a<i.length;a++)if(!i[a].deleteAction){var s=A.generateRecentListItem(i[a],e);t.appendChild(s)}}else{var o=document.createElement("div");o.innerText="There was a problem retrieving discussions.",o.classList.add("emptymessage"),t.appendChild(o)}n.remove()}(),async function(){var e=document.getElementById("creations"),n=document.createElement("div");n.classList.add("loading"),n.appendChild(l.generateIcon("loading")),e.parentNode.insertBefore(n,e.nextSibling);var i=await w.loadList("pageSize=12&page="+Math.round(25*Math.random()).toString());if(i&&i.length)for(var a=0;a<i.length;a++){var s=w.generateListItem(i[a],t);e.appendChild(s)}else{var o=document.createElement("div");o.innerText="There was a problem retrieving creations.",o.classList.add("emptymessage"),e.appendChild(o)}n.remove()}();var a=document.createElement("canvas");if(a.width=1,a.height=1,0===a.toDataURL("image/webp").indexOf("data:image/webp"))for(var s=document.querySelectorAll("a.tooltile"),o=0;o<s.length;o++)s[o].onmouseover=n,s[o].onmouseout=i;return a=null,E.show("Panzoid_home_970x90_728x90_468x60_320x50"),this.unload=function(){E.unload()},this}A.categories=[{name:"all categories",id:"all"},{name:"all on-topic categories",id:"ontopic"},{name:"chat",description:"General discussions that don't fit into any other category.",color:"#495057",id:1},{name:"help",description:"Get support with the tools, services, or site.",color:"#ce4663",id:6},{name:"idea",description:"Suggestion for improvements/enhancements or for new features.",color:"#cebe46",id:7},{name:"bug",description:"Bug report about something that is broken or working improperly.",color:"#4685ce",id:8},{name:"wiki",description:"Community maintained documentation detailing how to use a specific feature or accomplish a particular goal.",color:"#56ce46",id:9},{name:"update",description:"Category for official releases/updates.",color:"#ce4646",id:11,restricted:!0}],S.pageContent=_();var B=n(418),z=n.n(B);function U(){var e=this;function t(){p.call("/discussions/posts/unapproved","head").then((n=>{if(e.refreshPendingTimeout=setTimeout(t,3e5),!n.ok)return;const i=parseInt(n.headers.get("x-total-count"));if(!Number.isNaN(i)&&i>0){const e=document.querySelector("div.sections a[data-section='pending']");if(!e)return;let t=e.querySelector("span");t&&t.remove(),t=document.createElement("span"),t.classList.add("section-count"),t.innerText=i<100?i.toString():"99+",e.appendChild(t)}}))}function n(){p.call("/discussions?category=all&section=3","head").then((t=>{if(e.refreshMessagesTimeout=setTimeout(n,3e5),!t.ok)return;const i=parseInt(t.headers.get("x-total-count"));if(!Number.isNaN(i)&&i>0){const e=document.querySelector("div.sections a[data-section='messages']");if(!e)return;let t=e.querySelector("span");t&&t.remove(),t=document.createElement("span"),t.classList.add("section-count"),t.innerText=i<10?i.toString():"9+",e.appendChild(t)}}))}e.listParam={page:0,pageSize:25,category:0,section:0},e.refreshPendingTimeout=null,e.refreshMessagesTimeout=null,e.sections=[{name:"recommended",id:9},{name:"latest",id:0},{name:"top",id:1},{name:"categories",id:4},{name:"pins",id:5,hideForAnonymous:!0},{name:"messages",id:3,hideForAnonymous:!0},{name:"pending",id:10,hideForAnonymous:!0,moderatorOnly:!0},{name:"search",id:2,hidden:!0}],e.itemLink=function(){const t=this.pathname.split("/"),n=parseInt(t[2]),i=t[3]?parseInt(t[3]):null,a=this.closest("div.post")?.pz_post;return this.currentDiscussion||history.replaceState({scroll:window.scrollY},document.title,location.pathname+location.search),e.setUI(!0),this.classList.add("seen"),e.loadItem(n,i).then((e=>{e&&(a&&history.replaceState({},document.title,`/discussions/${a.discussion.discussionId}/${a.postNumber}`),history.pushState({},document.title,this.pathname))})),ga("set","page",this.pathname),ga("send","pageview"),!1},e.intersectionObserver=null,e.intersectionObserverCallback=function(e,t){for(let t of e)t.isIntersecting&&t.target.click()},e.scrollUpdateTimeout=null,e.scrollHandler=function(){clearTimeout(e.scrollUpdateTimeout),window.pz_isScrolling||(e.scrollUpdateTimeout=setTimeout((()=>{if(!e.currentDiscussion)return;const t=document.getElementById("discussion_posts").querySelectorAll("div.post");let n=t[t.length-1];for(let e=0;e<t.length;e++)if(t[e].getBoundingClientRect().bottom>150){n=t[e];break}if(n&&n.pz_post){const e=location.pathname.split("/");n.pz_post.postNumber>1?e[3]=n.pz_post.postNumber:e.splice(3,e.length-3),history.replaceState({},document.title,e.join("/")+location.search)}}),500))},e.createMoreButton=function(t,n,i=!0){const a=document.createElement("button");return a.onclick=t,a.innerText=n||"Load More",a.classList.add("more"),i&&(a.pz_intersectionObserver=new IntersectionObserver(e.intersectionObserverCallback,{root:null,rootMargin:"-50px 0px -10px 0px",threshold:.1}),a.pz_intersectionObserver.observe(a)),a},e.loadList=async function(t,n){e.currentDiscussion=null,removeEventListener("scroll",e.scrollHandler),clearTimeout(e.scrollUpdateTimeout);const i=new URLSearchParams(location.search);var a=d.parsePath();""===a.section&&(a.section=e.sections[0].name);var s=new URLSearchParams;const o=e.sections.find((e=>e.name===a.section));if("recommended"!==o.name&&"latest"!==o.name&&"top"!==o.name&&"search"!==o.name){document.querySelector("div.searchOrCreateBar").style.display="none";const e=document.getElementById("searchOrCreate");""!==e.value&&(e.value="")}else{document.querySelector("div.searchOrCreateBar").style.display="";const e=document.getElementById("searchOrCreate");e.value!==i.get("q")&&document.activeElement!==e&&(e.value=i.get("q"))}const r=o?o.id:-1;if(s.set("page",e.params?e.params.get("page"):0),s.set("pageSize",22),i.has("tool")&&s.set("tool",i.get("tool")),i.has("category")&&s.set("category",i.get("category")),i.has("q")&&s.set("query",i.get("q")),s.set("section",r),s.sort(),!t&&!n&&e.params&&e.params.toString()===s.toString())return;const c=document.getElementById("discussions_create");let p;if(c.toggleAttribute("disabled",!0),s.set("page",e.params&&t?parseInt(e.params.get("page"))+1:0),o&&"categories"===o.name){for(p=document.getElementById("discussions_table"),p.style.display="none",p.nextElementSibling&&p.nextElementSibling.classList.contains("more")&&p.nextElementSibling.remove(),p=document.getElementById("categories_table"),p.style.display="",s.set("query",A.categories.slice(2).map((e=>e.id)).join(",")),s.set("page",0),s.set("pageSize",50),e.discussions=[];p.lastElementChild!==p.firstElementChild;)p.removeChild(p.lastElementChild);let n=document.createElement("div");n.appendChild(l.generateIcon("loading")),n.classList.add("loading"),p.parentNode.insertBefore(n,p.nextSibling);var u=await A.loadList(s);n.remove(),e.params=s,Array.prototype.push.apply(e.discussions,u);const i="/discussions/latest?category=",a={};for(let e=2;e<A.categories.length;e++){let t=document.createElement("tr"),n=document.createElement("td");n.style="vertical-align: top; border-left: 5px solid "+A.categories[e].color;let s=document.createElement("a");s.style="font-size: 22px; display: block;",s.setAttribute("href",i+A.categories[e].id),s.innerText=A.categories[e].name,n.appendChild(s);let o=document.createElement("span");o.innerText=A.categories[e].description,n.appendChild(o),t.appendChild(n);let r=document.createElement("td");a[A.categories[e].id]=r,t.appendChild(r),p.appendChild(t)}if(!u||0===u.length){var m=document.createElement("div");if(u){if(t)return;m.innerText="No discussions found."}else m.innerText="There was a problem retreiving discussions.";return m.classList.add("emptymessage"),void p.appendChild(m)}for(var h=0;h<u.length;h++)(a[u[h].categoryId]||a[1]).appendChild(await A.generateCategoryListItem(u[h],e.itemLink));return}if(o&&"pending"===o.name){p=document.getElementById("discussions_table"),p.style.display="none",p.nextElementSibling&&p.nextElementSibling.classList.contains("more")&&p.nextElementSibling.remove(),p=document.getElementById("categories_table"),p.style.display="none",p=document.getElementById("posts_list"),p.style.display="",t||(p.innerHTML="",p.nextElementSibling&&p.nextElementSibling.classList.contains("more")&&p.nextElementSibling.remove());let n=document.createElement("div");n.appendChild(l.generateIcon("loading")),n.classList.add("loading"),p.parentNode.insertBefore(n,p.nextSibling);const i=await A.loadUnapprovedPosts(s);for(n.remove(),h=0;h<i.length;h++)p.appendChild(await A.generatePostItem(i[h]));if(e.params=s,!i||0===i.length){if(m=document.createElement("div"),i){if(t)return;m.innerText="You're all caught up!"}else m.innerText="There was a problem retreiving posts.";return m.classList.add("emptymessage"),void p.appendChild(m)}if(i.length>0){let t=e.createMoreButton((()=>{t.remove(),e.loadList(!0)}));p.parentNode.insertBefore(t,p.nextSibling)}return}if(p=document.getElementById("categories_table"),p.style.display="none",p=document.getElementById("posts_list"),p.style.display="none",p=document.getElementById("discussions_table"),p.style.display="",!t){for(e.discussions=[];p.lastElementChild!==p.firstElementChild;)p.removeChild(p.lastElementChild);p.nextElementSibling&&p.nextElementSibling.classList.contains("more")&&p.nextElementSibling.remove()}if("search"===a.section&&!i.get("q"))return;const g=document.createElement("div");if(g.appendChild(l.generateIcon("loading")),g.classList.add("loading"),p.parentNode.insertBefore(g,p.nextSibling),u=await A.loadList(s),g.remove(),"search"===a.section&&(i.get("q")?.length>2||!u?.length)&&c.toggleAttribute("disabled",!1),e.params=s,Array.prototype.push.apply(e.discussions,u),!u||0===u.length){if(m=document.createElement("div"),u){if(t)return;m.innerText="No discussions found."}else m.innerText="There was a problem retreiving discussions.";return m.classList.add("emptymessage"),void p.appendChild(m)}for(h=0;h<u.length;h++)p.appendChild(await A.generateListItem(u[h],e.itemLink));if(u.length>0){let t=e.createMoreButton((()=>{t.remove(),e.loadList(!0)}));p.parentNode.insertBefore(t,p.nextSibling)}},e.loadItem=async function(t,n){if(e.currentDiscussion?.discussionId===t){n=n??1;const e=document.querySelector(`div.post[data-postnum='${n}']`);if(e){const t=5,n=document.documentElement.scrollTop;return A.highlightPost(e,!0),Math.abs(n-document.documentElement.scrollTop)>t}}const i=document.getElementById("discussion_posts"),a=document.getElementById("discussion_controls");let s=!1;if(e.currentDiscussion?.discussionId!==t){for(;a.firstChild;)a.removeChild(a.firstChild);s=!0}for(;i.firstChild;)i.removeChild(i.firstChild);let o=null;if(t){if(e.discussions&&(o=e.discussions.find((function(e){return e.discussionId===t}))),!o){const e=document.createElement("div");e.appendChild(l.generateIcon("loading")),e.classList.add("loading"),i.appendChild(e);const n=await p.call("/discussions/"+t,"get");if(200!==n.status)throw loadContainer("/error"),n.status;o=await n.json(),e.remove()}}else{const e=new URLSearchParams(location.search);o={discussionId:null,title:e.get("title")??"",categoryId:A.categories.find((e=>"chat"===e.name)).id,pinned:!1,locked:!1},("true"===e.get("private")||e.get("users"))&&(o.recipients=e.get("users").split(","),o.private=!0)}e.currentDiscussion=o,document.getElementById("discussion").pz_discussion=o,A.onDiscussionUpdated(o);let r=new URLSearchParams;const d=Math.max((n??1)-10,1),c=o&&o.discussionId&&9===o.categoryId&&1===d?1:25;if(r.set("startPost",d),r.set("numPosts",c),o.discussionId&&await e.loadPosts(o,r,!0),s)if(o.locked){let e=document.createElement("span");e.style.color="#888",e.innerText="Discussion is closed",a.appendChild(e)}else if(await g.getCurrent()){const e=document.createElement("div");e.classList.add("post_reply_init"),e.innerText=o.title?"Post in "+o.title:"Enter your message",e.setAttribute("tabindex","0"),a.append(e);const t=document.createElement("div");t.style.display="none",a.append(t),e.addEventListener("focus",(()=>{a.classList.add("active"),e.style.display="none";const t=A.createPostEditEl({discussionPostId:null,discussion:o,message:""},null,(()=>{a.classList.remove("active"),t.remove(),e.style.display=""}));e.parentElement.insertBefore(t,e.nextElementSibling)})),o.discussionId||e.focus()}else{let e=document.createElement("span");e.style.color="#888",e.innerText="Log in to post your reply",a.appendChild(e)}if(a.style.display=1===d&&1===c?"none":"",n>1){const e=document.querySelector("div.post[data-postnum='"+(n??1)+"']");e&&A.highlightPost(e,s)}return addEventListener("scroll",e.scrollHandler),!0},e.loadPosts=async function(t,n,i){let a,s=document.getElementById("discussion_posts"),o=null,r=!1,d=!1;const c=await g.getCurrent();if(i){for(;s.firstChild;)s.removeChild(s.firstChild);a=[],s.pz_discussion=t,r=!0,d=!0}else a=Array.from(s.children).filter((e=>"DIV"===e.tagName)),a[0].pz_post.postNumber>parseInt(n.get("startPost"))?(r=!0,o=a[0]):d=!0;let p=document.createElement("div");p.appendChild(l.generateIcon("loading")),p.classList.add("loading"),s.insertBefore(p,o);let u=await A.loadDiscussionPosts(t,n);const m=p.getBoundingClientRect().height;r&&0===document.documentElement.scrollTop&&(document.documentElement.scrollTop=m);for(var h=0;h<u.length;h++){const e=a.findIndex((e=>e.pz_post&&e.pz_post.postNumber>=u[h].postNumber)),n=e>=0?a[e]:null;if(n&&n.pz_post.postNumber===u[h].postNumber)continue;const i=await A.generatePostItem(u[h],t);if(a.splice(e,0,i),s.insertBefore(i,n),(!c||!c.hasSubscription)&&u[h].postNumber%20==1&&u[h].postNumber<60){var y=document.createElement("div");y.classList.add("post");var f=document.createElement("div");f.style="text-align:center;width: 100%;min-height:90px;",f.id="Panzoid_discussionpost_728x90_468x60_320x50_300x75",y.appendChild(f),s.insertBefore(y,o),E.show("Panzoid_discussionpost_728x90_468x60_320x50_300x75")}}const v=parseInt(n.get("startPost")),b=parseInt(n.get("numPosts"));if(r&&n.get("startPost")>1){let n=new URLSearchParams;const i=Math.max(v-b,1);n.set("startPost",i),n.set("numPosts",Math.min(b,v-i));let a=e.createMoreButton((()=>{a.remove(),e.loadPosts(t,n)}),"Show Older Posts");s.insertBefore(a,s.firstElementChild)}if(p.remove(),document.getElementById("discussion_controls").style.display=1===v&&1===b?"none":"",!((0===u.length||u[u.length-1].createdAt>=t.lastPostAt)&&b>1)&&d){let n=new URLSearchParams;n.set("startPost",v+b),n.set("numPosts",25);let i=e.createMoreButton((()=>{i.remove(),e.loadPosts(t,n)}),b>1?"Show Newer Posts":"Load Replies",b>1);s.appendChild(i)}},e.setUI=function(e){document.getElementById("discussion").style.display=e?"block":"none",document.getElementById("discussions").style.display=e?"none":"block"};var i=document.getElementById("category"),a=document.getElementById("categorydd"),s=document.getElementById("editor_categorydd");!function(){for(var t=0;t<A.categories.length;t++){let e=A.categories[t],n=document.createElement("li");A.generateCategoryItem(e,n,!0),n.pz_data=e,a.appendChild(n),e.restricted||"number"!=typeof e.id||(n=n.cloneNode(!0),n.pz_data=e,s.appendChild(n))}C.createDropdown(i,a),i.addEventListener("change",(function(e){let t=a.children[e.detail].pz_data;i.innerHTML="",A.generateCategoryItem(t,i)})),i.addEventListener("close",(function(t){let n=new URLSearchParams(location.search),i=a.children[t.detail].pz_data;n.set("category","all"===i.id?"":i.id),history.pushState({},"",location.pathname+"?"+n.toString()),e.loadList()}))}(),function(){const t=document.getElementById("searchOrCreate");let n=null;t.addEventListener("keyup",(i=>{clearTimeout(n),n=setTimeout((()=>{const n=t.value.trim(),i=new URLSearchParams(location.search);if(i.get("q")!==n){if(i.set("q",n),"search"!==location.pathname.split("/")[2]){if(!n.length)return;history.pushState({scroll:window.scrollY},document.title,"/discussions/search?"+i.toString()),d.update(r,2)}else history.replaceState({scroll:window.scrollY},document.title,location.pathname+"?"+i.toString());document.getElementById("discussions_create").toggleAttribute("disabled",!0),e.loadList(!1,!0)}}),500)})),t.addEventListener("keydown",(e=>{"Enter"===e.key&&e.ctrlKey&&t.nextElementSibling.click()}))}(),document.getElementById("discussions_create").addEventListener("click",(e=>{const t=document.getElementById("searchOrCreate");return loadContainer(`/discussions/new?title=${encodeURIComponent(t.value)}`,!0),!1}));const o=document.getElementById("controls");let r;const c=g.getCurrent().then((i=>{r=d.init(e.sections.filter((e=>(i?!e.moderatorOnly||i.moderator:!e.hideForAnonymous)&&!e.hidden)).map((e=>e.name)),e.loadList,2),o.firstElementChild.appendChild(r),i&&(i.moderator&&t(),n())}));e.navigate=async function(t){await c,d.update(r,2);let n=new URLSearchParams(location.search).get("category"),a=A.categories.find((e=>e.id.toString()===n));a=a||A.categories[0],i.pz_setValue(a);var s=location.pathname.split("/");if("discussions"===s[1]){var o=s[2];if("new"===o){if(!await g.getCurrent())return void g.loginRedirect(null,!0);e.setUI(!0),await e.loadItem(null)}else if(Number.isNaN(parseInt(o)))e.setUI(!1),e.loadList(),document.title="Discussions - Panzoid";else{e.setUI(!0);const t=s[3]?parseInt(s[3]):null;await e.loadItem(parseInt(o),t)}t?.state&&void 0!==t.state.scroll&&Number.isNaN(parseInt(o))&&window.scrollTo(window.scrollX,t.state.scroll)}else loadContainer(location.pathname)},removeEventListener("popstate",defaultPopState),addEventListener("popstate",e.navigate);const u=history.scrollRestoration;return history.scrollRestoration="manual",e.unload=function(){clearTimeout(e.refreshMessagesTimeout),clearTimeout(e.refreshPendingTimeout),removeEventListener("scroll",e.scrollHandler),removeEventListener("popstate",e.navigate),clearTimeout(e.scrollUpdateTimeout),addEventListener("popstate",defaultPopState),history.scrollRestoration=u,E.unload()},e.navigate(),e}U.pageContent=z();var D=n(377),N=n(178),R=n.n(N);function M(){return this}M.pageContent=R();var j=n(720),q=n.n(j);class O{static initRecaptcha(){window.grecatcha||T([O.scriptUrl])}static unloadRecaptcha(){document.querySelectorAll(`script[src="${O.scriptUrl}"]`).forEach((e=>e.remove()));let e=document.getElementsByClassName("grecaptcha-badge");for(;e[0];)e[0].parentElement.remove();delete window.grecaptcha}static getRecaptchaToken(e){return new Promise(((t,n)=>{grecaptcha.ready((()=>{grecaptcha.execute(O.clientId,{action:e}).then((function(e){t(e)}))}))}))}static async requestWithRecaptcha(e,t,n,i){const a=await this.getRecaptchaToken(e);return n.recaptcha=a,await p.call(e,t,n,i)}}function F(){var e=!1;function t(){var e=new URLSearchParams(location.search).get("continue")||"/";loadContainer(e,!0,!0)}function n(e,t){var n=document.getElementById("messageUI");e?(n.style.color=t?"#c92a2a":"",n.style.display="",n.innerText=e):n.style.display="none"}async function i(){n();var e={};e.username=document.getElementById("username").value,e.password=document.getElementById("password").value,e.username.length<3||e.password.length<=3?n("Login incorrect, try again.",!0):(this.style.visibility="hidden",200===(await p.call("/users/me","put",e)).status?(g.clearCurrent(),updateAccountUI(),t()):(n("Login incorrect, try again.",!0),this.style.visibility=""))}async function a(){n();var e={};e.email=document.getElementById("forgotemail").value,this.style.visibility="hidden";var t=await O.requestWithRecaptcha("/users/tokenrequest","post",e);200===t.status?(document.getElementById("forgotUI").firstElementChild.style.display="none",n("An email has been sent to "+e.email+" with instructions to log in."),this.style.display="none"):404===t.status?(n("Account does not exist. Please verify the email address is correct.",!0),this.style.visibility=""):(n("An error occured, please try again later.",!0),this.style.visibility="")}function s(e){n();var t=document.getElementById("heading"),i=document.getElementById("loginUI"),a=document.getElementById("createUI"),s=document.getElementById("forgotUI");"login"===e?(t.innerText="Log in",i.style.display="",a.style.display="none",s.style.display="none",O.unloadRecaptcha()):"create"===e?(t.innerText="Create a new account",i.style.display="none",a.style.display="",s.style.display="none",O.initRecaptcha()):"forgot"===e&&(t.innerText="Forgot password",i.style.display="none",a.style.display="none",s.style.display="",O.initRecaptcha())}this.ssoComplete=async function(){var n=await p.call("/users/me","put",{sso:!0});if(n.ok)g.clearCurrent(),updateAccountUI(),t();else{s("create");var i=await n.text(),a=document.getElementById("newemail");a.previousElementSibling.classList.add("active"),a.value=i,a.disabled=!0,a.style.backgroundColor="#dee2e6",document.getElementById("newpassword").parentNode.style.display="none",document.getElementById("newusername").focus(),e=!0}};var o={},r={};function l(e){this.style.borderColor="",this.nextElementSibling.style.display="none",clearTimeout(o[this.id]),o[this.id]=setTimeout(r[this.id],750)}function d(){this.previousElementSibling.classList.add("active")}function c(){this.value||this.previousElementSibling.classList.remove("active")}r.newusername=async function(){var e,t=document.getElementById("newusername"),n=t.nextElementSibling,i=t.value;return i.length>50&&(e="Too long."),i.length<3&&(e="Too short."),!e&&/[^a-zA-Z0-9_.-]/.test(i)&&(e="Must only contain letters, numbers, dot (.), underscore (_), and dash (-)."),!e&&/^[^A-Za-z0-9]/.test(i)&&(e="Must start with a letter or number."),!e&&/[^A-Za-z0-9]$/.test(i)&&(e="Must end with a letter or number."),!e&&/([_.-]{2,})/.test(i)&&(e="Must not contain a sequence of 2 or more special (_-.) characters."),e||404!==(await p.call("/users/"+i,"head")).status&&(e="Username taken."),e?(t.style.borderColor="#c92a2a",n.innerText=e,n.style.display="",!1):(t.style.borderColor="#2b8a3e",n.style.display="none",!1)},r.length=function(e,t,n){var i=document.getElementById(e),a=i.nextElementSibling,s=i.value;return s.length>n?(i.style.borderColor="#c92a2a",a.innerText="Too long.",a.style.display="",!1):s.length<t?(i.style.borderColor="#c92a2a",a.innerText="Too short.",a.style.display="",!1):(i.style.borderColor="#2b8a3e",a.style.display="none",!0)},r.newpassword=r.length.bind(this,"newpassword",6,150),r.newdisplay=r.length.bind(this,"newdisplay",0,100),r.newemail=function(){var e=document.getElementById("newemail"),t=e.nextElementSibling,n=e.value;return t.style.display="",/\S+@\S+\.\S+/.test(n)?(e.style.borderColor="#2b8a3e",t.style.color="#2b8a3e",t.innerText="We'll send you a link to verify.",!0):(e.style.borderColor="#c92a2a",t.style.color="",t.innerText="Invalid email.",!1)};for(var u=document.getElementsByTagName("input"),m=0;m<u.length;m++)u[m].onfocus=d,u[m].onblur=c;return document.getElementById("username").focus(),document.getElementById("password").onkeydown=function(e){"Enter"===e.key&&(i.call(document.getElementById("login_submit")),this.blur())},document.getElementById("forgotemail").onkeydown=function(e){"Enter"===e.key&&(a.call(document.getElementById("forgot_submit")),this.blur())},document.getElementById("newemail").oninput=l,document.getElementById("newusername").oninput=l,document.getElementById("newdisplay").oninput=l,document.getElementById("newpassword").oninput=l,document.getElementById("login_forgot").onclick=s.bind(this,"forgot"),document.getElementById("login_submit").onclick=i,document.getElementById("login_create").onclick=s.bind(this,"create"),document.getElementById("create_submit").onclick=async function(){n();var i={};e||(i.email=document.getElementById("newemail").value,i.password=document.getElementById("newpassword").value),i.username=document.getElementById("newusername").value,i.display=document.getElementById("newdisplay").value,this.style.visibility="hidden";var a=await O.requestWithRecaptcha("/users","post",i);200===a.status?e?(g.clearCurrent(),updateAccountUI(),t()):(document.getElementById("createUI").style.display="none",n("Almost ready! An email has been sent to "+i.email+" with a link to log in.")):("WEAK_PASS"===await a.text()?(n("Your password is too weak, please choose a stronger password.",!0),document.getElementById("newpassword").style.borderColor="#c92a2a"):n("An error occurred, please try again later.",!0),this.style.visibility="")},document.getElementById("create_login").onclick=s.bind(this,"login"),document.getElementById("forgot_submit").onclick=a,document.getElementById("forgot_login").onclick=s.bind(this,"login"),document.getElementById("sso_google").onclick=function(){window.open(p.BASE_URI+"/users/google")}.bind(this),this.unload=function(){O.unloadRecaptcha()},this}O.clientId="6LezKcQUAAAAACQtv4Cjd8Jpac83Ieev7Akilg30",O.scriptUrl="https://www.google.com/recaptcha/api.js?render=6LezKcQUAAAAACQtv4Cjd8Jpac83Ieev7Akilg30",F.pageContent=q();var $=n(216),H=n.n($);function W(){const e=new URL(location.href).searchParams;async function t(){const t=await p.call("/identity/oauth?"+e.toString(),"GET");if(t.ok){const n=new URL(e.get("redirect_uri"));n.searchParams.set("state",e.get("state")),n.searchParams.set("code",await t.text()),location.href=n.toString()}else loadContainer("/error")}const n=document.getElementById("oauth_ui"),i=document.createElement("div");return i.classList.add("loading"),i.appendChild(l.generateIcon("loading")),n.parentElement.insertBefore(i,n),async function(){if(!await g.getCurrent())return void g.loginRedirect();const n=document.getElementById("oauth_appname");if("PanzoidDesktop"===e.get("client_name"))n.innerText="Panzoid Desktop";else{if("PanzoidWeb"!==e.get("client_name"))return void loadContainer("/error");n.innerText="Panzoid Web"}document.getElementById("continue").onclick=t,document.getElementById("cancel").onclick=()=>{loadContainer("/",!0)}}().then((()=>{i.remove(),n.style.display=""})),this}W.pageContent=H();var Y=n(481),G=n.n(Y);function Z(){const e=document.getElementById("renderStatus"),t=document.createElement("div");function n(t,n){const i=document.createElement("h1");if(i.innerText="Render status",e.appendChild(i),n){const t=document.createElement("div");t.innerHTML=n,e.appendChild(t)}const a=function(){const e=document.createElement("div");e.setAttribute("id","progress");const t=document.createElement("div");t.classList.add("bar");const n=document.createElement("div");t.appendChild(n),e.appendChild(t);const i=document.createElement("div");i.classList.add("step"),i.style="left:0;margin-left:0;";const a=document.createElement("span");a.innerText="Created",i.appendChild(a),e.appendChild(i);const s=document.createElement("div");s.classList.add("step"),s.style="left:33%";const o=document.createElement("span");o.innerText="Queued",s.appendChild(o),e.appendChild(s);const r=document.createElement("div");r.classList.add("step"),r.style="left:66%";const l=document.createElement("span");l.innerText="Processing",r.appendChild(l),e.appendChild(r);const d=document.createElement("div");d.classList.add("step"),d.style="left:100%;margin-left: -40px;";const c=document.createElement("span");return c.innerText="Finished",d.appendChild(c),e.appendChild(d),e}(),s=a.children,o=Math.min(t,3);for(let e=0;e<=o;e++)s[e+1].classList.add("stepdone");4===t&&(s[4].classList.remove("stepdone"),s[4].classList.add("stepfailure")),a.children[0].children[0].style.width=o/3*100+"%",e.appendChild(a)}t.appendChild(l.generateIcon("loading")),t.classList.add("loading"),e.appendChild(t);var i=location.pathname.split("/")[2];if(!i)throw loadContainer("/error"),400;return async function(i){var a=await p.call("/renders/"+i,"get");if(200!==a.status)throw loadContainer("/error"),a.status;var s=await a.json();s.finishedAt?3===s.status?function(t){let n=document.createElement("div");n.classList.add("columns");let i=document.createElement("div"),a=document.createElement("div");a.classList.add("creation"),a.style="width: 330px;";let s=document.createElement("img");s.onload=l.showImg,s.setAttribute("src",t.thumbnailUrl),a.appendChild(s),i.appendChild(a);let o=document.createElement("a");o.classList.add("button","downloadbutton");let r=l.generateIcon("save");o.appendChild(r);let d=document.createElement("span");d.innerText="Download video",o.appendChild(d),o.setAttribute("href",t.downloadUrl),i.appendChild(o),n.appendChild(i);let c=document.createElement("div");c.style="flex-grow: 2; padding: 0 10px;line-height: 30px;",n.appendChild(c);let p=document.createElement("div");p.classList.add("details"),c.appendChild(p);let u=(e,t)=>{let n=document.createElement("div");n.style=t?"grid-column: span 2; font-weight: bold; padding: 10px; background-color: #e9ecef;":"grid-column: span 2; font-size: 20px; font-weight: bold; padding: 10px 0;",n.innerText=e,p.appendChild(n)},m=(e,t)=>{let n=document.createElement("span");n.innerText=e,p.appendChild(n);let i=document.createElement("span");i.innerHTML=t,p.appendChild(i)},h=(e,t)=>{var n=e/60,i=Math.floor(n/60);return n=Math.floor(n%60),e%=60,t?("0"+i).slice(-2)+":"+("0"+n).slice(-2)+":"+("0"+e.toFixed(3)).slice(-6):("0"+i).slice(-2)+":"+("0"+n).slice(-2)+":"+("0"+Math.round(e)).slice(-2)};u("Video");let g=JSON.parse(t.renderParams),y=g.format.split("_");if(m("Format",y[0]+" ("+y[1]+"/"+y[2]+")"),m("Quality",["very low","low","good","high","very high"][g.quality]),m("Resolution",g.width+"x"+g.height),m("Frame rate",g.rate),m("Length",h(g.length/g.rate,!0)),u("Render"),m("Finished at",l.dateTimeString(new Date(t.finishedAt))),m("Render credits",g.credits),0!==g.price&&m("Price","$"+g.price.toFixed(2)),0!==g.subscriptionCredits&&g.credits!==g.subscriptionCredits&&m("Subscription credits",g.subscriptionCredits),m("Render duration",h((new Date(t.finishedAt)-new Date(t.startedAt))/1e3)),t.uploadJobs.length>0){u("Export");let e=["Pending","Uploading","Finished","Failed"];for(let n=0;n<t.uploadJobs.length;n++){let i=t.uploadJobs[n];i.serviceConnection?(u(i.serviceConnection.connectionType,!0),m("Account",i.serviceConnection.accountName)):(u("[Disconnected Service]",!0),m("Account","-")),m("Status",e[i.status])}}e.appendChild(n)}(s):n(4,"Something went wrong while rendering your video and it could not be completed. <br />No charge will be taken from your account or payment method (any pending transactions will be removed)."):s.startedAt?n(2,"Your render is processing."):s.queuedAt?n(1,"Your render will start soon."):n(0,"Your render has been created."),t.remove()}(i),this}Z.pageContent=G();var V=n(935),J=n.n(V);function Q(){function e(e,t){var n=document.getElementById("messageUI");e?(n.style.color=t?"#c92a2a":"",n.style.display="",n.innerText=e):n.style.display="none"}async function t(e){var t=new URLSearchParams(location.search),n={};n.token=t.get("t"),200===(await p.call("/users/me/activation","put",n)).status?e?(document.getElementById("verifying").style.display="none",document.getElementById("changeemail_success").style.display=""):(g.clearCurrent(),updateAccountUI(),loadContainer("/",!0)):(document.getElementById("verifying").style.display="none",document.getElementById("error").style.display="")}var n={},i={length:function(e,t,n){var i=document.getElementById(e),a=i.nextElementSibling,s=i.value;return s.length>n?(i.style.borderColor="#c92a2a",a.innerText="Too long.",a.style.display="",!1):s.length<t?(i.style.borderColor="#c92a2a",a.innerText="Too short.",a.style.display="",!1):(i.style.borderColor="#2b8a3e",a.style.display="none",!0)}};i.newpassword=i.length.bind(this,"newpassword",6,150);var a=document.getElementById("newpassword");a.oninput=function(e){this.style.borderColor="",this.nextElementSibling.style.display="none",clearTimeout(n[this.id]),n[this.id]=setTimeout(i[this.id],750)},a.onfocus=function(){this.previousElementSibling.classList.add("active")},a.onblur=function(){this.value||this.previousElementSibling.classList.remove("active")},document.getElementById("password_set").onclick=async function(){e();var t=new URLSearchParams(location.search),n=document.getElementById("newpassword"),i={};i.token=t.get("t"),i.newPassword=n.value;var a=await p.call("/users/me/password","put",i);200===a.status?(document.getElementById("changepassword").style.display="none",document.getElementById("changepassword_success").style.display=""):"WEAK_PASS"===await a.text()?(e("Your password is too weak, please choose a stronger password.",!0),document.getElementById("newpassword").style.borderColor="#c92a2a"):e("An error occurred, please try again later.",!0)};var s=location.pathname.split("/")[1];return"activate"===s?(document.getElementById("verifying").style.display="",t()):"changepassword"===s?(document.getElementById("changepassword").style.display="",a.focus()):"changeemail"===s&&(document.getElementById("verifying").style.display="",t(!0)),this}Q.pageContent=J();var K=n(858),X=n.n(K);function ee(){let e={clipmaker:{title:"Clipmaker - Online Custom Intro/Animation Creator",desc:"Design a custom, free intro, animation, or video clip for YouTube and more."},backgrounder:{title:"Backgrounder - Online Custom Graphics Creator",desc:"Design custom channel art, thumbnails, or avatars for YouTube, Twitter, Facebook and more."},videoeditor:{title:"Panzoid Video Editor - Edit Videos Online",desc:"Powerful tool to edit video/audio clips, add effects, and more online for free."}},t="",n="";const i=["gen1","gen2","gen3"],a=["clipmaker","backgrounder","videoeditor"],s=location.pathname.split("/",10),o="preview"===s[1]?{clipmaker:{path:"gen3/clipmaker.html"},backgrounder:{path:"gen3/backgrounder.html"},videoeditor:{path:"gen3/videoeditor.html"}}:{clipmaker:{path:"gen2/clipmaker.html"},backgrounder:{path:"gen2/backgrounder.html"},videoeditor:{path:"gen3/videoeditor.html"}};if(1==s.length-1)return loadContainer("/error"),null;const r=s[2];if(o[r])n=r,t=o[r].path;else{const e=s[3];if(!e||!i.includes(r)||!a.includes(e))return loadContainer("/error"),null;if("gen1"===r&&"videoeditor"===e)return loadContainer("/error"),null;n=e,t=`${r}/${e}.html`}var l;return(l=document.querySelector("meta[name='description']"))||((l=document.createElement("meta")).setAttribute("name","description"),document.getElementsByTagName("head")[0].appendChild(l)),l.setAttribute("content",e[n].desc),document.title=e[n].title,document.getElementById("legacy_container").src=`/legacy/${t}${location.search}`,this}ee.pageContent=X();var te=n(761),ne=n.n(te),ie=n(262),ae=n.n(ie),se=n(658),oe=n.n(se);function re(){var e=this;e.sections=["summary","creations","discussions","badges"];const t="https://www.google.com/recaptcha/api.js?render=6LezKcQUAAAAACQtv4Cjd8Jpac83Ieev7Akilg30";let n=()=>{window.grecatcha||T([t])},i=()=>{document.querySelectorAll(`script[src="${t}"]`).forEach((e=>e.remove()));let e=document.getElementsByClassName("grecaptcha-badge");for(;e[0];)e[0].parentElement.remove();delete window.grecaptcha},a=async(e,t,n,i)=>{const a=await(s=e,new Promise((function(e,t){grecaptcha.ready((function(){grecaptcha.execute("6LezKcQUAAAAACQtv4Cjd8Jpac83Ieev7Akilg30",{action:s}).then((function(t){e(t)}))}))})));var s;return n.recaptcha=a,await p.call(e,t,n,i)};async function s(t){var n=await p.call("/users/"+E+"/profile","get");if(!n.ok)throw loadContainer("/error"),n.status;var i=await n.json();e.profile=i;let a=document.getElementById("user_name");a.innerHTML="";let s=document.createElement("h1");s.style="font-size:26px; margin:0; display:inline-block; vertical-align: middle;",a.appendChild(s);let o=g.generateModeratorImage(i);o&&(o.classList.add("large"),a.appendChild(o));let r=g.generateSubscriptionImage(i);r&&(r.classList.add("large"),a.appendChild(r)),i.display.trim().length&&i.display!==i.name?s.innerText=i.display:s.innerText=i.name;let d=document.createElement("h3");d.innerText="Stats",t.appendChild(d);var c=document.createElement("div");function u(e,t,n){var i,a;"number"==typeof t&&(a="",(i=t)>999&&(i/=1e3,a="K"),i>999&&(i/=1e3,a="M"),t=i.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})+a);var s=document.createElement("span"),o=document.createElement("span");o.innerText=e;var r=document.createElement("span");r.innerText=t,r.style.fontWeight="bold",n?(s.appendChild(o),s.appendChild(r)):(s.appendChild(r),s.appendChild(o)),c.appendChild(s)}c.classList.add("stats"),t.appendChild(c),u("joined",l.relativeDate(new Date(i.createdAt)),!0),u("discussions",i.discussionCount),u("posts",i.postCount),u("post likes",i.postLikesReceived),u("creations",i.creationCount),u("creation likes",i.creationLikesReceived),u("creation views",i.creationViewCount),u("followers",i.followerCount);for(var m=document.getElementById("user_avatar");m.firstElementChild;)m.removeChild(m.firstElementChild);if(m.appendChild(g.generateAvatar(i,120,!0)),""!==i.bio){let e=document.createElement("h3");e.innerText="About",t.appendChild(e);let n=document.createElement("div");n.innerText=i.bio,t.appendChild(n)}if(i.connections&&i.connections.length){let e=document.createElement("h3");e.innerText="Links",t.appendChild(e);for(let e=0;e<i.connections.length;e++){let n=document.createElement("div");n.style="display: flex;";let a=document.createElement("img");const s=i.connections[e].connectionType.toLowerCase();"discord"===s?a.src=ae():"youtube"===s&&(a.src=oe()),a.classList.add("connect_logo"),a.title=i.connections[e].connectionType,n.appendChild(a);let o=document.createElement("span");if(o.style="font-size:18px; margin-left: 5px; align-self: center;","YouTube"===i.connections[e].connectionType){let t=document.createElement("a");t.setAttribute("target","_blank"),t.setAttribute("rel","nofollow"),t.setAttribute("href","https://youtube.com/channel/"+i.connections[e].accountId),t.innerText=i.connections[e].accountName,o.appendChild(t)}else o.innerText=i.connections[e].accountName;n.appendChild(o),t.appendChild(n)}}}async function o(e){var t=new URLSearchParams;let n=!!e.children.length;if(n||e.classList.add("creations"),t.set("page",e.params?e.params.get("page"):0),t.set("pageSize",12),t.set("query",E),t.set("section",5),t.sort(),!n&&e.params&&e.params.toString()===t.toString())return;t.set("page",e.params&&n?parseInt(e.params.get("page"))+1:0);let i=await w.loadList(t.toString());if(e.params=t,!i||0===i.length){var a=document.createElement("div");return a.innerText=i?"This user has not yet posted any creations.":"There was a problem retreiving creations.",a.classList.add("emptymessage"),void e.appendChild(a)}for(var s=0;s<i.length;s++)e.appendChild(w.generateListItem(i[s]));return i.length===parseInt(t.get("pageSize"))}async function r(t){var n=new URLSearchParams;let i=!!t.children.length;if(n.set("username",E),n.set("page",t.params?t.params.get("page"):0),n.set("pageSize",15),n.sort(),!i&&t.params&&t.params.toString()===n.toString())return;n.set("page",t.params&&i?parseInt(t.params.get("page"))+1:0);const a=await A.loadList(n.toString(),!0);if(t.params=n,!a||0===a.length){let e=document.createElement("div");return e.innerText=a?"This user has not yet posted anything.":"There was a problem retreiving posts.",e.classList.add("emptymessage"),void t.appendChild(e)}window.markdownit||await T(["//cdnjs.cloudflare.com/ajax/libs/markdown-it/8.3.1/markdown-it.min.js","//cdnjs.cloudflare.com/ajax/libs/markdown-it-emoji/1.4.0/markdown-it-emoji.min.js"]);for(var s=0;s<a.length;s++){a[s].user=e.profile;const n=await A.generatePostItem(a[s]);t.appendChild(n)}return a.length===parseInt(n.get("pageSize"))}async function c(e){let t,n=await p.call("/users/"+E+"/badges","get");if(n.ok&&(t=await n.json()),!t||0===t.length){var i=document.createElement("div");return i.classList.add("emptymessage"),i.innerText=t?"This user has not yet received any badges.":"There was a problem retreiving badges.",void e.appendChild(i)}for(var a=0;a<t.length;a++){var s=document.createElement("div");s.classList.add("badge");var o=document.createElement("h3");o.innerText=t[a].name,s.appendChild(o);var r=document.createTextNode(t[a].description);s.appendChild(r),e.appendChild(s)}}async function u(e){let t,n=await p.call("/users/"+E+"/moderation/events","get");n.ok&&(t=await n.json());let i=document.createElement("h3");i.innerText="Permissions",e.appendChild(i);let a=Array(3).fill(null),s=[{name:"All actions",indent:0,ids:[0,1,2,3,5]},{name:"Participate in discussions",indent:1,ids:[0,1,3,5]},{name:"Create new public discussions",indent:2,ids:[0]},{name:"Reply in public discussions",indent:2,ids:[1]},{name:"Create new private discussions",indent:2,ids:[3]},{name:"Reply in private discussions",indent:2,ids:[5]},{name:"Publish new creations",indent:1,ids:[2]}],o=document.createElement("div");o.style="display: grid; grid-template-columns: min-content min-content min-content; align-items: center; grid-gap: 10px;",e.appendChild(o);let r=[{name:"Allow",time:0},{name:"Restrict for 1 hour",time:60},{name:"Restrict for 24 hours",time:1440},{name:"Restrict for 7 days",time:10080},{name:"Restrict for 30 days",time:43200},{name:"Restrict for 1 year",time:525600}],d=document.createElement("ul");d.style="display:none;",d.classList.add("actiondd");let c=document.createElement("li");c.innerText="Cancel",d.appendChild(c);for(let e=0;e<r.length;e++){let t=document.createElement("li");t.innerText=r[e].name,t.style.fontWeight="bold",d.appendChild(t)}e.appendChild(d);let u=document.createElement("h3");if(u.innerText="History",e.appendChild(u),t&&0!==t.length){let n=document.createElement("div");n.style="display: grid; grid-template-columns: 20px 1fr 1fr; grid-gap: 5px;",e.appendChild(n);const i=["","inappropriate content","spamming","misc reason"];for(let e=0;e<t.length;e++){let s=document.createElement("span");n.appendChild(s);let o=document.createElement("span");if(n.appendChild(o),1===t[e].eventType){s.appendChild(l.generateIcon("delete"));let n=document.createElement("a");n.innerText="Discussion",n.setAttribute("href","/discussions/"+t[e].referenceId),o.appendChild(n);let a=document.createTextNode(` deleted by ${t[e].user.display} for ${i[t[e].reason]}`);o.appendChild(a)}else if(2===t[e].eventType){s.appendChild(l.generateIcon("delete"));let n=document.createElement("a");n.innerText="Discussion post",n.setAttribute("href","/discussions/"+t[e].relatedId),o.appendChild(n);let a=document.createTextNode(` deleted by ${t[e].user.display} for ${i[t[e].reason]}`);o.appendChild(a)}else if(3===t[e].eventType){s.appendChild(l.generateIcon("delete"));let n=document.createElement("a");n.innerText="Creation",n.setAttribute("href","/creations/"+t[e].referenceId),o.appendChild(n);let a=document.createTextNode(` deleted by ${t[e].user.display} for ${i[t[e].reason]}`);o.appendChild(a)}else if(4===t[e].eventType){s.appendChild(l.generateIcon("flag"));let n=document.createElement("a");n.innerText="Discussion post",n.setAttribute("href","/discussions/"+t[e].relatedId),o.appendChild(n);let i=document.createTextNode(" flagged "+t[e].reason+" times");o.appendChild(i)}else if(5===t[e].eventType){s.appendChild(l.generateIcon("flag"));let n=document.createElement("a");n.innerText="Creation",n.setAttribute("href","/creations/"+t[e].referenceId),o.appendChild(n);let i=document.createTextNode(" flagged "+t[e].reason+" times");o.appendChild(i)}else{let n;s.appendChild(l.generateIcon("shield"));let i=t[e].eventType-6;0===i?(n="creating public discussions",a[i]=a[i]||new Date(t[e].effectiveUntil)):1===i?(n="replying in public discussions",a[i]=a[i]||new Date(t[e].effectiveUntil)):2===i?(n="publishing creations",a[i]=a[i]||new Date(t[e].effectiveUntil)):3===i?(n="creating private discussions",a[i]=a[i]||new Date(t[e].effectiveUntil)):5===i&&(n="replying in private discussions",a[i]=a[i]||new Date(t[e].effectiveUntil));let r=.001*(new Date(t[e].effectiveUntil)-new Date(t[e].eventDate));o.innerText=r<30?`User unbanned by ${t[e].user.display} from ${n}`:`User banned by ${t[e].user.display} from ${n} for ${l.relativeDateString(r)}`}s.children[0].style.width="20px",s.children[0].style.height="20px",s.children[0].style.fill="#888";let r=document.createElement("span");r.appendChild(l.generateDate(new Date(t[e].eventDate))),n.appendChild(r)}}else{let n=document.createElement("div");n.classList.add("emptymessage"),n.innerText=t?"This user has no moderation history.":"There was a problem retreiving moderation history.",e.appendChild(n)}let m=new Date;for(let e=0;e<s.length;e++){let t=document.createElement("span");t.style.marginLeft=20*(0|s[e].indent)+"px",t.style.whiteSpace="nowrap",t.innerText=s[e].name,o.appendChild(t);let n=document.createElement("span");n.style.whiteSpace="nowrap";let i=a.filter(((t,n)=>s[e].ids.includes(n)));if(i.every((e=>!e||e-m<3e4)))n.innerText="allowed",n.style.color="#2b8a3e";else if(i.some((e=>!e||e-m<3e4))){let e=i.reduce(((e,t)=>t&&t>e?t:e));n.innerText="partially allowed until "+l.dateTimeString(e),n.style.color="#e67700"}else{let e=i.reduce(((e,t)=>t&&t>e?t:e));n.innerText="restricted until "+l.dateTimeString(e),n.style.color="#c92a2a"}n.style.fontWeight="bold",o.appendChild(n);let c=document.createElement("div");c.classList.add("button_controls"),o.appendChild(c);let u=document.createElement("button"),h=l.generateIcon("edit");u.appendChild(h),u.setAttribute("tabIndex","0"),u.setAttribute("title","edit this permission"),C.createDropdown(u,d);const g=s[e].ids;u.addEventListener("close",(e=>{if(0===e.detail)return;const t=e.detail-1,n=r[t].time;u.enabled=!1,p.call("/users/"+E+"/moderation/restrictions","post",{actions:g,time:n}).then((function(e){e.ok&&b(),u.enabled=!0}))})),c.appendChild(u)}}async function m(e){var t=new URLSearchParams;let n,i=!!e.children.length;if(t.set("page",e.params?e.params.get("page"):0),t.set("pageSize",10),t.sort(),!i&&e.params&&e.params.toString()===t.toString())return;t.set("page",e.params&&i?parseInt(e.params.get("page"))+1:0),i?n=e.firstChild:(n=document.createElement("table"),n.classList.add("renders"),n.innerHTML="<tr><th>Render</th><th>Status</th></tr>",e.appendChild(n));let a,s=await p.call("/renders?"+t.toString(),"get");if(e.params=t,s.ok&&(a=await s.json()),!a||0===a.length){var o=document.createElement("div");return o.classList.add("emptymessage"),o.innerText=a?"No cloud renders yet.":"There was a problem retreiving renders.",void n.appendChild(o)}let r=["Created","Queued","Processing","Finished","Failed"];for(var d=0;d<a.length;d++){let e=a[d];var c=document.createElement("tr"),u=document.createElement("td");u.setAttribute("colspan","1"),u.style.lineHeight="0";var m=document.createElement("a");if(m.setAttribute("href","/renders/"+e.id),e.thumbnailUrl){m.classList.add("creation"),m.style="max-width: 220px;";var h=document.createElement("img");h.onload=l.showImg,h.setAttribute("src",e.thumbnailUrl),m.appendChild(h)}else m.innerText=e.id;u.appendChild(m),c.appendChild(u);var g=document.createElement("td");g.innerText=r[e.status],c.appendChild(g),n.appendChild(c)}return a.length===parseInt(t.get("pageSize"))}async function h(e){let t=[],i=function(e){e=e||t.length;for(let n=0;n<e;n++)t.pop().remove();t.length&&(t[t.length-1].style.display="")},s=function(){t.length&&(t[t.length-1].style.display="none");let n=document.createElement("div");n.style.display="none",e.appendChild(n),t.push(n);let i=document.createElement("div");return i.appendChild(l.generateIcon("loading")),i.classList.add("loading"),e.appendChild(i),n.pz_show=()=>{i.remove(),n.style.display=""},n};n();let o=function(e,t,n){let i=document.createElement("div");i.classList.add("plans","nonfree");let a=Object.keys(y.plans);for(let o=0;o<a.length;o++){let l=y.plans[a[o]];if(l.cycle!==e||!l.subscription)continue;let d=y.generatePlanUI(l,(()=>{let e=s();e.appendChild(r("Render credits")),e.pz_show()}),t.bind(this,a[o]),n===l);i.appendChild(d)}return i},r=function(e,t){let n=document.createElement("div"),a=document.createElement("button");a.classList.add("button");let s=l.generateIcon("back");s.style="fill: #e9ecef;width: 30px;height: 30px;vertical-align: middle;",a.appendChild(s),a.style="margin-right:8px;vertical-align:middle;",a.setAttribute("title","Back"),a.onclick=t||(()=>{i(1)}),n.appendChild(a);let o=document.createElement("h2");return o.innerText=e,o.style="font-size: 22px;display: inline-block;vertical-align: middle;margin: 10px 0;",n.appendChild(o),n},d=async function(e,t){let n,i=s(),a=r("Payment");i.appendChild(a);let o=document.createElement("div");i.appendChild(o);let l=document.createElement("div");l.style="text-align: right; margin: 10px 0;",i.appendChild(l);let d=document.createElement("button");d.classList.add("button"),d.innerText=t||"Next",d.style="padding: 0 20px;",d.onclick=()=>{n.requestPaymentMethod().then((function(t){e(t.nonce)})).catch((function(e){}))},l.appendChild(d);let c=await p.call("/payments/clienttoken","get");c.ok;let u=await c.text();n=await braintree.dropin.create({authorization:u,container:o,vaultManager:!0,paypal:{flow:"vault"}}),i.pz_show()},c=async function(e,t,n){let i=s(),a=r("Confirmation");i.appendChild(a);let o=document.createElement("div");o.style="margin: 10px 0",o.innerHTML=await e,i.appendChild(o);let l=document.createElement("div");l.style="text-align:right;",i.appendChild(l);let d=document.createElement("button");d.classList.add("button"),d.innerText=n,d.style="padding: 0 20px;",d.onclick=t,l.appendChild(d),i.pz_show()},u=async function(e,t,n){let a=s(),o=!1;try{o=(e=await e).ok}catch(e){}let l=r(o?"You're all set":"Something went wrong",(()=>{i(),h()}));a.appendChild(l);let d=document.createElement("div");d.innerText=o?t:n,a.appendChild(d),a.pz_show()},m=function(e){d((t=>{let n=y.plans[e];c('<div class="confirmation_list"><span>Plan:</span> '+n.name+"<br><span>Billing term:</span> "+(1===n.cycle?"Monthly":"Annual")+"<br><span>Total due:</span> $"+(n.monthlyPrice*n.cycle*.01).toFixed(2)+"</div>",(()=>{u(a("/subscription","post",{planId:e,nonce:t}),"Your subscription is now active.","There was a problem creating your subscription. Please try again later or contact support.")}),"Purchase subscription")}))},h=async function(){let e=s(),t=await p.call("/subscription");if(t.ok)e.appendChild(function(e){let t=document.createElement("div"),n=y.plans[e.planId],i=(e,n)=>{let i=document.createElement("h3");i.innerText=e,t.appendChild(i);let a=document.createElement("div");"string"==typeof n?a.innerHTML=n:a.appendChild(n),t.appendChild(a)};i("Plan",n.name),i("Benefits",y.generateBenefitsUI(n));let l=document.createElement("div");l.style="margin: 10px 0";let h=e=>{let t=new Date(e);return t.setDate(t.getDate()+1),t.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})};if(e.active){i("Next payment","$"+(n.monthlyPrice*n.cycle*.01).toFixed(2)+" on "+h(e.billingPeriodEndDate));let t=document.createElement("button");t.classList.add("button"),t.style="margin: 5px 0;",t.innerText="Change plan",t.onclick=()=>{let t=s();t.appendChild(r("Plan")),t.appendChild(o(n.cycle,(t=>{let i=y.plans[t];c((async()=>{let t=new URLSearchParams;t.set("start",e.billingPeriodStartDate),t.set("end",e.billingPeriodEndDate);let a="",s=await p.call("/subscription/proration?"+t.toString());if(s.ok){let e=await s.text();a=(i.monthlyPrice-n.monthlyPrice)*n.cycle,a*=parseFloat(e),a=Math.max(a,0),a=(.01*a).toFixed(2)}return'<div class="confirmation_list"><span>Plan:</span> '+i.name+"<br><span>Billing term:</span> "+(1===i.cycle?"Monthly":"Annual")+"<br><span>Total due:</span> $"+a+"</div>"})(),(()=>{u(a("/subscription/plan","put",{planId:t}),"Your plan was changed.","Your plan could not be changed. Please try again later or contact support.")}),"Confirm plan change")}),n)),t.pz_show()},l.appendChild(t),l.appendChild(document.createElement("br"));let m=document.createElement("button");m.classList.add("button"),m.style="margin: 5px 0;",m.innerText="Change payment method",m.onclick=()=>{d((e=>{u(a("/subscription/paymentmethod","put",{nonce:e}),"Your payment method was changed.","Your payment method could not be changed. Please try again later or contact support.")}),"Save changes")},l.appendChild(m),l.appendChild(document.createElement("br"));let g=document.createElement("button");g.classList.add("button"),g.style="background-color: #c92a2a;margin: 5px 0;",g.innerText="Cancel subscription",g.onclick=()=>{c("Are you sure you want to cancel your subscription?",(async()=>{u(p.call("/subscription","delete"),"Your subscription was canceled.","Your subscription could not be canceled. Please try again later or contact support.")}),"Cancel subscription and benefits")},l.appendChild(g)}else{i("Expiration",h(e.billingPeriodEndDate));let t=document.createElement("button");t.classList.add("button"),t.style="margin: 5px 0;",t.innerText="New subscription",t.onclick=()=>{let e=s(),t=r("Plan");e.appendChild(t);let n=o(12,m);e.appendChild(y.generateTermUI((t=>{n.remove(),n=o(t,m),e.appendChild(n)}))),e.appendChild(n),e.pz_show()},l.appendChild(t)}return t.appendChild(l),t}(await t.json()));else{let t=o(12,m);e.appendChild(y.generateTermUI((n=>{t.remove(),t=o(n,m),e.appendChild(t)}))),e.appendChild(t)}e.pz_show()};await h()}async function f(t){let n=document.createElement("h3");n.innerText="Connect an Account",t.appendChild(n);let i=document.createElement("div"),a=document.createElement("a");a.classList.add("connect_logo"),a.title="Discord",a.setAttribute("target","_blank"),a.setAttribute("href",p.BASE_URI+"/connections/discord");let s=document.createElement("img");s.src=ae(),a.appendChild(s),i.appendChild(a);let o=document.createElement("a");o.classList.add("connect_logo"),o.title="YouTube",o.setAttribute("target","_blank"),o.setAttribute("href",p.BASE_URI+"/connections/youtube");let r=document.createElement("img");r.src=oe(),o.appendChild(r),i.appendChild(o),t.appendChild(i);let d=document.createElement("h3");d.innerText="Connections",t.appendChild(d);let c=document.createElement("div");c.classList.add("connectionlist");let u=await p.call("/connections");if(u.ok){const n=await u.json();for(let t=0;t<n.length;t++){let i=n[t],a=document.createElement("img");const s=i.connectionType.toLowerCase();"discord"===s?a.src=ae():"youtube"===s&&(a.src=oe()),a.classList.add("connect_logo"),a.title=i.connectionType,c.appendChild(a);let o=document.createElement("div");o.style="font-size:18px; align-self: center;",o.innerText=i.accountName,c.appendChild(o);let r=document.createElement("div");r.classList.add("button_controls"),c.appendChild(r);const d=i.visibility;let u=document.createElement("button");u.pz_state=d;let m=l.generateIcon(d?"visible":"invisible");m.style.fill=d?"#1862ab":"",u.appendChild(m),u.setAttribute("tabIndex","0"),u.setAttribute("title",d?"hide this connection":"make this connection publicly visible"),u.onclick=function(){u.enabled=!1,p.call("/connections/"+i.connectionId,"put",{visibility:!u.pz_state}).then((function(e){if(e.ok){const e=!u.pz_state;u.pz_state=e,u.setAttribute("title",e?"hide this connection":"make this connection publicly visible"),l.switchIcon(m,e?"visible":"invisible"),m.style.fill=e?"#1862ab":""}u.enabled=!0}))},r.appendChild(u);let h=document.createElement("button"),g=l.generateIcon("delete");h.appendChild(g),h.setAttribute("tabIndex","0"),h.setAttribute("title","delete this connection"),h.onclick=function(){p.call("/connections/"+i.connectionId,"delete").then((function(t){if(t.ok)e.ssoComplete();else{let e=document.createElement("span");e.innerText="Something went wrong, please try again later.",e.style="color: #c92a2a; margin-left: 10px;",r.appendChild(e)}}))},r.appendChild(h)}if(0===n.length){let e=document.createElement("div");e.classList.add("emptymessage"),e.innerText="You have not yet added any connections.",t.appendChild(e)}}else{let e=document.createElement("div");e.classList.add("emptymessage"),e.innerText="There was a problem loading your connections.",t.appendChild(e)}t.appendChild(c)}async function v(){const e=document.getElementById("settings");for(;e.firstElementChild;)e.removeChild(e.firstElementChild);const t=document.createElement("div");e.appendChild(t);const i=t=>{const n=document.createElement("div"),i=document.createElement("h3");return i.innerText=t,n.appendChild(i),e.appendChild(n),n},s=i("Username"),o=document.createElement("span");s.appendChild(o);const r=i("Email"),d=document.createElement("input");d.style="display: inline-block",d.toggleAttribute("disabled"),r.appendChild(d);const c=document.createElement("div");c.style="margin-top: 10px; display: none;";const u=document.createElement("label");u.innerText="New email address",u.setAttribute("for","profile_newemail"),c.appendChild(u);const m=document.createElement("input");m.id="profile_newemail",m.style="margin-bottom: 5px;",c.appendChild(m);const h=document.createElement("span");h.classList.add("message"),h.style="display: none",c.appendChild(h);const y=document.createElement("label");y.innerText="Confirm email address",y.setAttribute("for","profile_newemailrepeat"),c.appendChild(y);const f=document.createElement("input");f.id="profile_newemailrepeat",f.style="margin-bottom: 5px;",c.appendChild(f);const v=document.createElement("span");v.classList.add("message"),v.style="display: none",c.appendChild(v),r.appendChild(c);const b=document.createElement("div");b.style="margin-left: 5px;",b.classList.add("button_controls"),r.appendChild(b);const w=document.createElement("button");w.title="edit";const C=l.generateIcon("edit");w.appendChild(C),b.appendChild(w);const x=document.createElement("div");x.classList.add("button_controls"),c.appendChild(x);const k=document.createElement("button");k.title="save";const I=l.generateIcon("check");k.appendChild(I),x.appendChild(k);const _=document.createElement("button");_.title="cancel";const T=l.generateIcon("remove");_.appendChild(T),x.appendChild(_);let L=null;const P=function(){return h.style.display="",/\S+@\S+\.\S+/.test(m.value)?(m.style.borderColor="#2b8a3e",h.style.color="#2b8a3e",h.innerText="We'll send you a link to verify.",f.value.length?f.value!==m.value?(f.style.borderColor="#c92a2a",v.style.display="",void(v.innerText="Email does not match.")):void(f.style.borderColor="#2b8a3e"):void 0):(m.style.borderColor="#c92a2a",h.style.color="",void(h.innerText="Invalid email."))},A=function(){this.style.borderColor="",this.nextElementSibling.style.display="none",clearTimeout(L),L=setTimeout(P,750)};m.oninput=A,f.oninput=A,w.onclick=()=>{c.style.display="",b.style.display="none",x.style.display=""},k.onclick=async()=>{if(m.value!==f.value)return;const e={email:m.value};Q.toggleAttribute("disabled",!0),O.requestWithRecaptcha("/users/tokenrequest","post",e).then((e=>{e.ok?(t.innerText="A link has been sent to your new email address. Use the link to finish updating your email address.",t.style.color="#2b8a3e",d.value=m.value+" (pending verification)",m.value="",f.value=""):(t.innerText="Something went wrong when updating your email. Please try again later or contact support.",t.style.color="#c92a2a")})).catch((()=>{t.innerText="Something went wrong when updating your email. Please try again later or contact support.",t.style.color="#c92a2a"})),c.style.display="none",b.style.display="",x.style.display="none"},_.onclick=()=>{c.style.display="none",b.style.display="",x.style.display="none"};const S=i("Password"),B=document.createElement("button");B.innerText="Send password reset email",B.classList.add("button"),B.style="line-height:30px",S.appendChild(B),B.onclick=async()=>{B.style.display="none",(await a("/users/tokenrequest","post",{})).ok?(t.innerText="A link has been sent to your new email address. Use the link to change your password.",t.style.color="#2b8a3e"):(t.innerText="Something went wrong when sending your password reset link. Please try again later or contact support.",t.style.color="#c92a2a"),B.style.display=""};const z=i("Display name (optional)"),U=document.createElement("input");U.toggleAttribute("disabled"),U.style="display: inline-block; vertical-align: middle;",z.appendChild(U);const D=document.createElement("div");D.style="vertical-align: middle; margin-left: 5px;",D.classList.add("button_controls"),z.appendChild(D);const N=document.createElement("button");N.title="edit";const R=l.generateIcon("edit");N.appendChild(R),D.appendChild(N);const M=document.createElement("button");M.title="save",M.style.display="none";const j=l.generateIcon("check");M.appendChild(j),D.appendChild(M);const q=document.createElement("button");q.title="cancel",q.style.display="none";const F=l.generateIcon("remove");q.appendChild(F),D.appendChild(q),N.onclick=()=>{U.pz_oldValue=U.value,U.toggleAttribute("disabled",!1),N.style.display="none",M.style.display="",q.style.display=""},M.onclick=()=>{const e={display:U.value,bio:G.value};p.call("/users/me/profile","put",e).then((e=>{e.ok?(document.getElementById("user_name").firstElementChild.innerText=U.value,t.innerText="Your display name has been updated.",t.style.color="#2b8a3e"):(t.innerText="Something went wrong when updating your display name. Please try again later or contact support.",t.style.color="#c92a2a")})).catch((()=>{t.innerText="Something went wrong when updating your display name. Please try again later or contact support.",t.style.color="#c92a2a"})),U.toggleAttribute("disabled",!0),N.style.display="",M.style.display="none",q.style.display="none"},q.onclick=()=>{U.value=U.pz_oldValue,U.toggleAttribute("disabled",!0),N.style.display="",M.style.display="none",q.style.display="none"};const $=i("Profile picture"),H=document.createElement("div");H.style="display: inline-block; width: 300px;",$.appendChild(H);const W=document.createElement("div");W.style="margin-left: 5px;",W.classList.add("button_controls"),$.appendChild(W);const Y=i("About"),G=document.createElement("textarea");G.setAttribute("rows","4"),G.toggleAttribute("disabled"),G.style="display: inline-block; vertical-align: middle;",Y.appendChild(G);const Z=document.createElement("div");Z.classList.add("button_controls"),Z.style="vertical-align: middle; margin-left: 5px;",Y.appendChild(Z);const V=document.createElement("button");V.title="edit";const J=l.generateIcon("edit");V.appendChild(J),Z.appendChild(V);const Q=document.createElement("button");Q.style="display: none",Q.title="save";const K=l.generateIcon("check");Q.appendChild(K),Z.appendChild(Q);const X=document.createElement("button");X.style="display: none",X.title="cancel";const ee=l.generateIcon("remove");X.appendChild(ee),Z.appendChild(X),V.onclick=()=>{G.pz_oldValue=G.value,G.toggleAttribute("disabled",!1),V.style.display="none",Q.style.display="",X.style.display=""},Q.onclick=()=>{const e={display:U.value,bio:G.value};p.call("/users/me/profile","put",e).then((e=>{e.ok?(t.innerText="Your profile has been updated.",t.style.color="#2b8a3e"):(t.innerText="Something went wrong when updating your profile. Please try again later or contact support.",t.style.color="#c92a2a")})).catch((()=>{t.innerText="Something went wrong when updating your profile. Please try again later or contact support.",t.style.color="#c92a2a"})),G.toggleAttribute("disabled",!0),V.style.display="",Q.style.display="none",X.style.display="none"},X.onclick=()=>{G.value=G.pz_oldValue,G.toggleAttribute("disabled",!0),V.style.display="",Q.style.display="none",X.style.display="none"},n(),p.call("/users/"+E+"/profile","get").then((async e=>{if(e.ok){var n=await e.json();o.innerText=n.name,U.value=n.display,d.value=n.email,G.value=n.bio,H.appendChild(g.generateAvatar(n,120,!0));var i=document.createElement("button"),a=l.generateIcon("edit");if(i.appendChild(a),i.setAttribute("title","edit avatar"),i.onclick=function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("style","height:0px;width:0px;overflow:hidden;border:0;padding:0"),e.onchange=function(){var e=new FormData;e.append("avatar",this.files[0]),p.call("/users/me/avatar","put",e).then((function(e){201===e.status&&e.text().then((function(e){n.userAvatarId=parseInt(e),H.replaceChild(g.generateAvatar(n,120,!0),H.firstChild)}))}))},document.body.append(e),e.click()},W.appendChild(i),n.userAvatarId){var s=document.createElement("button"),r=l.generateIcon("delete");s.appendChild(r),s.setAttribute("tabIndex","0"),s.setAttribute("title","delete avatar"),s.onclick=function(){p.call("/users/me/avatar","delete").then((function(e){e.ok?(n.userAvatarId=null,H.replaceChild(g.generateAvatar(n,120,!0),H.firstChild)):(t.innerText="Something went wrong when updating your profile. Please try again later or contact support.",t.style.color="#c92a2a")}))},W.appendChild(s)}}else t.innerText="Something went wrong when loading your profile. Please try again later or contact support.",t.style.color="#c92a2a"})).catch((()=>{t.innerText="Something went wrong when loading your profile. Please try again later or contact support.",t.style.color="#c92a2a"}))}async function b(){var t=d.parsePath(3),n=e.sections.indexOf(t.section)<0?e.sections[0]:t.section;"preferences"===n&&(n="settings");let a=document.getElementById("section_divs"),s=a.children;for(var p=0;p<s.length;p++)s[p].style.display="none";let g,y=document.createElement("div");y.appendChild(l.generateIcon("loading")),y.classList.add("loading"),e.loadButton=document.createElement("button"),e.loadButton.innerText="load more",e.loadButton.classList.add("more"),addEventListener("scroll",e.scrollHandler);let b=document.getElementById(n);b||(b=document.getElementById("section"),b.innerHTML="",g=document.createElement("div"),b.appendChild(g)),i();let w=async()=>{let t;switch(n){case"creations":t=o;break;case"discussions":t=r;break;case"badges":t=c;break;case"moderation":t=u;break;case"renders":t=m;break;case"subscription":t=h;break;case"connections":t=f;break;case"settings":t=v;break;case"summary":t=()=>{}}e.loadButton.remove(),a.appendChild(y);let i=await t(g);y.remove(),i&&a.appendChild(e.loadButton)};e.loadButton.onclick=w,await w(),b.style.display=""}e.scrollHandler=function(t){if(e.loadButton&&null!==e.loadButton.offsetParent){var n=e.loadButton.offsetTop+e.loadButton.clientHeight;window.pageYOffset+window.innerHeight>n-10&&e.loadButton.click()}};var E=location.pathname.split("/")[2];return async function(){if(E){var t=await g.getCurrent();t&&E===t.name?(document.getElementById("sendmessage").style.display="none",e.sections.push("renders"),e.sections.push("subscription"),e.sections.push("connections"),e.sections.push("settings")):(t&&t.moderator&&e.sections.push("moderation"),document.getElementById("sendmessage").setAttribute("href",`/discussions/new?private=true&users=${E}`));var n=document.getElementById("controls"),i=d.init(e.sections,b,3);n.firstElementChild.appendChild(i),d.update(i,3),document.title=E+" - Panzoid",await s(document.getElementById("summary")),b()}else loadContainer("/error")}(),e.unload=function(){i(),removeEventListener("scroll",e.scrollHandler)},e.ssoComplete=async function(e){if(""===e)return;let t=document.getElementById("summary");t.innerHTML="",await s(t),b()},e}re.pageContent=ne();const le={app:i,about:f,creations:k,default:S,discussions:U,download:D.Z,error:M,login:F,oauth:W,renders:Z,token:Q,tools:ee,users:re};function de(){return g.loginRedirect(),!1}async function ce(){await p.call("/users/me","put",{}),g.clearCurrent(),updateAccountUI(),loadContainer(location.pathname)}function pe(e){document.getElementById("header-usernav").style.display="none";var t=document.getElementById("header-menunav");"flex"!==t.style.display&&(t.style.display="flex",t.firstElementChild.focus(),e.stopPropagation())}function ue(e){document.getElementById("header-menunav").style.display="none";var t=document.getElementById("header-usernav");"flex"!==t.style.display&&(t.style.display="flex",t.firstElementChild.focus(),e.stopPropagation())}window.updateAccountUI=async function(){var e=document.getElementById("header-login"),t=document.getElementById("header-user");t.style.display="none",e.style.display="none";var n=await g.getCurrent();if(null!==n){for(t.style.display="";t.firstChild;)t.removeChild(t.firstChild);var i=g.generateAvatar(n,50,!0);t.appendChild(i);var a=n.name,s=document.getElementById("header-usernav").children;s[0].setAttribute("href","/users/"+a),s[1].setAttribute("href","/discussions/messages"),s[2].setAttribute("href","/users/"+a+"/renders"),s[3].setAttribute("href","/users/"+a+"/subscription"),s[4].setAttribute("href","/users/"+a+"/settings"),s[5].onclick=ce}else e.style.display="",e.onclick=de,t.firstChild&&t.removeChild(t.firstChild)},window.linkNavigate=function(e){return!(!e||!e.ctrlKey)||(loadContainer(this.pathname+this.search,!0),e&&e.preventDefault(),!1)},window.loadContainer=function(e,t,n){let i=document.getElementById("container"),a=e.split("?",1)[0];a=a.split("/",4);let s=function(e){let t=e[1];return t={activate:"token",changepassword:"token",changeemail:"token",preview:"tools",dev:void 0}[t]||t||"default",t}(a);if(le[s]||(s="error"),i.innerHTML=le[s].pageContent,t&&(n?history.replaceState({},"Panzoid",e):history.pushState({},"Panzoid",e),ga("set","page",e),ga("send","pageview")),"tools"!==s&&"preview"!==s)for(var o=i.getElementsByTagName("a"),r=0;r<o.length;r++){var l=o[r].getAttribute("href")||"";o[r].onclick||l.startsWith("/tools")||l.startsWith("/preview")||o[r].addEventListener("click",linkNavigate)}var d=document.getElementById("page_title");d&&(document.title=d.innerText),window.currentPage&&window.currentPage.unload&&window.currentPage.unload();const c=new le[s];window.currentPage=c},window.defaultPopState=function(e){loadContainer(location.pathname)},window.addEventListener("popstate",defaultPopState),window.PZ={},window.PZ.account={currentUser:void 0,updatePromise:null,csrf:void 0},document.addEventListener("DOMContentLoaded",(function(){if(document.getElementById("header-menu").onclick=pe,document.getElementById("header-user").onclick=ue,window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(null===localStorage.getItem("theme")||"dark"===localStorage.getItem("theme"))?document.documentElement.classList.add("dark-theme"):document.documentElement.classList.add("light-theme"),window.onclick=function(e){document.getElementById("header-menunav").style.display="none",document.getElementById("header-usernav").style.display="none"},window.onkeydown=function(e){"Escape"===e.key&&(document.getElementById("header-menunav").style.display="none",document.getElementById("header-usernav").style.display="none")},!location.pathname.startsWith("/tools")&&!location.pathname.startsWith("/preview"))for(var e=document.getElementsByTagName("a"),t=0;t<e.length;t++){var n=e[t].getAttribute("href")||"";e[t].onclick||n.startsWith("/tools")||n.startsWith("/preview")||(e[t].onclick=linkNavigate)}E.init(),updateAccountUI(),loadContainer(location.pathname)}))})()})();